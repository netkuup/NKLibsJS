var NK={};NK.isset=function(t){return void 0!==t&&null!=t},NK.empty=function(t){return!NK.isset(t)||0==t.length},NK.core={},NK.core.reloadOnDomChange=function(t){NK.isset(NK.core.reactableModules)||(NK.core.reactableModules=[]),NK.core.reactableModules.push(t),NK.isset(NK.core.MutationObserver)||(MutationObserver=window.MutationObserver||window.WebKitMutationObserver,NK.core.MutationObserverOffset=1,NK.core.MutationObserver=new MutationObserver(function(t,o){if(NK.core.MutationObserverOffset>0)NK.core.MutationObserverOffset--;else for(var e=0;e<NK.core.reactableModules.length;e++)void 0!==NK.core.reactableModules[e].reload&&NK.core.reactableModules[e].reload()}),NK.core.MutationObserver.observe(document,{subtree:!0,childList:!0}))},NK.core.ignoreMutations=function(t){NK.isset(NK.core.MutationObserver)&&(NK.core.MutationObserverOffset+=t)},window.addEventListener("load",function(){window.loaded=!0});var NKActions={};if(void 0===NK)throw"You must include base.js before actions.js";NKActions.start=function(t){NK.isset(NKActions.loaded)&&!0===NKActions.loaded||(window.addEventListener("load",NKActions.reload),!0===window.loaded&&NKActions.reload(),!0===t&&NK.core.reloadOnDomChange(NKActions),NKActions.loaded=!0)},NKActions.reload=function(){function t(t,o){var e=$(t).html();(e.toLowerCase().startsWith("hide")||e.toLowerCase().startsWith("show"))&&(e=e.substring(4)),e.length>0&&!e.startsWith(" ")&&(e=" "+e),o.is(":visible")?$(t).html("Hide"+e):$(t).html("Show"+e),console.log("entra")}$(".NKHide_btn").off().on("click",function(){$(this).closest(".NKHide_dst").hide()}),$(".NKDel_btn").off().on("click",function(){$(this).closest(".NKDel_dst").remove()}),$(".NKToggle_btn").off().on("click",function(){var o=$(this).siblings(".NKToggle_dst");o.toggle(),$(this).hasClass("NKReact")&&t(this,o)}),$(".NKToggle_btn.NKReact").each(function(){t(this,$(this).siblings(".NKToggle_dst"))}),$(".NKTemplate_btn").off().on("click",function(){var t=$(this).attr("class").split("NKTemplate_btn ")[1].split(" ")[0];$(".NKTemplate_dst."+t).append($(".NKTemplate_src."+t).clone(!0,!0).removeClass("NKTemplate_src").addClass("NKTemplate").show())})};var NKCast={};if(void 0===NK)throw"You must include base.js before cast.js";NKCast.intByteArray={toUtf8String:function(t){for(var o="",e=0;e<t.length;e++)(t[e]<0||t[e]>255)&&console.error("Error NKCast.intByteArray.toUtf8String(): ("+t[e]+") Out of range [0..255]"),o+=String.fromCharCode(t[e]);return o},toUtf16String:function(t){return NKCast.intByteArray.toUtf8String(t)},toHexString:function(t,o,e){if(!NK.isset(t))return"";for(var r="",i=0;i<t.length;i++)e&&0!=i&&(r+=" "),r+=NKCast.intByte.toHexString(t[i],o);return r},toInt:function(t){for(var o=0,e=1,r=t.length-1;r>=0;r--)(t[r]<0||t[r]>255)&&console.error("Error NKCast.intByteArray.toUtf16String(): ("+t[r]+") Out of range [0..255]"),o+=t[r]*e,e*=256;return o}},NKCast.intByte={toHexString:function(t,o){return(t<0||t>255)&&console.error("Error NKCast.intByte.toHexString(): ("+t+") Out of range [0..255]"),o?"0x"+t.toString(16):t.toString(16)}},NKCast.utf16String={toIntByteArray:function(t){for(var o="",e=0;e<t.length;e++)o+=t.charCodeAt(e);return o}},NKCast.utf8String={toIntByteArray:function(t){return NKCast.utf16String.toIntByteArray(t)}};var NKDrag={};NKDrag.selection={element:null},NKDrag.start=function(t){if(!NK.isset(NKDrag.loaded)||!0!==NKDrag.loaded){if(NKDrag.loaded=!0,void 0===NKPosition)throw"You must include position.js before drag.js";NKPosition.start(),window.addEventListener("load",NKDrag.reload),!0===window.loaded&&NKDrag.reload(),!0===t&&NK.core.reloadOnDomChange(NKDrag),$(document).on("mousemove",function(){null!=NKDrag.selection.element&&NKDrag.selection.element.offset({left:NKPosition.getMouseX()-NKDrag.selection.offset[0],top:NKPosition.getMouseY()-NKDrag.selection.offset[1]})})}},NKDrag.reload=function(){$(".NKDrag_src").on("mousedown",function(){NKDrag.selection.element=$(this).closest(".NKDrag_dst"),NKDrag.selection.offset=NKPosition.getMouse();var t=NKDrag.selection.element.offset();NKDrag.selection.offset[0]-=t.left,NKDrag.selection.offset[1]-=t.top}),$(".NKDrag_src").on("mouseup",function(){NKDrag.selection.element=null})};var NKForm={};if(void 0===NK)throw"You must include base.js before form.js";NKForm.errors={duplicated_fields:!0,invalid_json:!0},NKForm.getFields=function(t,o){var e={};return $(t+" :input").each(function(){if(!NK.empty(this.name))if("[]"===this.name.slice(-2)){var t=this.name.substr(0,this.name.length-2);NK.isset(e[t])||(e[t]=[]),e[t].push($(this).val())}else{if(NKForm.errors.duplicated_fields&&NK.isset(e[this.name]))throw"NKForm.getFields: Duplicated input field with name ("+this.name+")";e[this.name]=$(this).val()}}),!0===o?JSON.stringify(e):e},NKForm.setFields=function(t,o,e){if(!NK.empty(o)){if(!0===e)try{o=JSON.parse(o)}catch(t){if(NKForm.errors.invalid_json)throw"NKForm.setFields: Invalid input json. ("+o+")";return}$(t+" :input").each(function(){NK.empty(o[this.name])||$(this).val(o[this.name])})}},NKForm.send=function(t,o,e){$.post(o,NKForm.getFields(t),function(t,o){NK.isset(e)?e(t,o):location.reload()})},NKForm.fileChooser=function(t,o){o=o||"",$("body").append('<input type="file" id="NKtmpfile" accept="'+o+'">');var e=document.getElementById("NKtmpfile");e.addEventListener("change",function(o){t(o.path[0].value)},!1),$("#NKtmpfile").trigger("click"),e.parentNode.removeChild(e)},NKForm.dirChooser=function(t){$("body").append('<input type="file" id="NKtmpfile" webkitdirectory directory multiple/>');var o=document.getElementById("NKtmpfile");o.addEventListener("change",function(o){t(o.path[0].value)},!1),$("#NKtmpfile").trigger("click"),o.parentNode.removeChild(o)};var NKLoader={};if(void 0===NK)throw"You must include base.js before loader.js";NKLoader.setSelector=function(t,o){$(t).css("display","none"),$(o).css("display","none"),window.setInterval(function(){$.active>0?$(t).css("display","block"):($.active=0,$(t).css("display","none"))},500),$(document).ajaxError(function(){$.active=0}),"localhost"!=document.domain&&(window.onerror=function(t,e,r){return $.active=0,NK.isset(o)&&$(o).css("display","block"),console.log("Error: ",t,e,r),!0})};var NKPopup={};if(void 0===NK)throw"You must include base.js before popup.js";NKPopup.config={allow_hover:!0,mouse_margin:5,box_margin:5},NKPopup.start=function(t){if(!NK.isset(NKPopup.loaded)||!0!==NKPopup.loaded){if(NKPopup.loaded=!0,void 0===NKPosition)throw"You must include position.js before popup.js";NKPosition.start(),window.addEventListener("load",NKPopup.reload),!0===window.loaded&&NKPopup.reload(),!0===t&&NK.core.reloadOnDomChange(NKPopup)}},NKPopup.reload=function(){$(".NKPopup_dst").hide(),$(".NKPopup_src").off(),$(".NKPopup_src").on("mousemove",function(){var t=$(this).siblings(".NKPopup_dst"),o=NK.isset(t.attr("nk-type"))?t.attr("nk-type"):"box",e=NK.isset(t.attr("nk-align"))?t.attr("nk-align").split(","):["top","center"],r=NK.isset(t.attr("nk-offset"))?t.attr("nk-offset").split(",").map(Number):[0,0],i=NK.isset(t.attr("nk-arrow-size"))?t.attr("nk-arrow-size").split(",").map(Number)[1]:0,s=t.attr("nk-x"),n=t.attr("nk-y");t.show();var l={};if("mouse"===o)var a=[10,22],c=NKPosition.getMouse(),d=NKPopup.config.mouse_margin;else{if("box"!==o)throw"Invalid type: "+o;var a=[$(this).outerWidth(),$(this).outerHeight()],c=[$(this).offset().left,$(this).offset().top],d=NKPopup.config.box_margin}if("top"===e[0]||"bottom"===e[0]){if(NK.isset(e[1])&&"center"!==e[1])if("left"===e[1])l={left:c[0]-t.outerWidth()+a[0],top:c[1]-t.outerHeight()-i-d};else{if("right"!==e[1])throw"Invalid param '"+e[1]+"'";l={left:c[0],top:c[1]-t.outerHeight()-i-d}}else l={left:c[0]-t.outerWidth()/2+a[0]/2,top:c[1]-t.outerHeight()-i-d};"bottom"===e[0]&&(l.top+=a[1]+t.outerHeight()+2*i+2*d)}else{if("left"!==e[0]&&"right"!==e[0])throw"Invalid param '"+e[0]+"'";if(NK.isset(e[1])&&"middle"!==e[1])if("top"===e[1])l={left:c[0]-t.outerWidth()-d-i,top:c[1]-t.outerHeight()+a[1]};else{if("bottom"!==e[1])throw"Invalid param '"+e[1]+"'";l={left:c[0]-t.outerWidth()-d-i,top:c[1]}}else l={left:c[0]-t.outerWidth()-d-i,top:c[1]-t.outerHeight()/2+a[1]/2};"right"===e[0]&&(l.left+=a[0]+t.outerWidth()+2*i+2*d)}l.left=l.left+r[0],l.top=l.top+r[1],NK.isset(s)&&(l.left=s),NK.isset(n)&&(l.top=n),t.offset(l)}),$(".NKPopup_src").on("mouseleave",function(){var t=$(this);NKPopup.config.allow_hover?window.setTimeout(function(){0==t.siblings(".NKPopup_dst:hover").length?t.siblings(".NKPopup_dst").hide():t.siblings(".NKPopup_dst:hover").on("mouseleave",function(){$(this).off().hide()})},50):t.siblings(".NKPopup_dst").hide()}),NK.core.ignoreMutations(1),$(".NKPopup_dst").each(function(t){if(NK.isset($(this).attr("nk-arrow-size"))||NK.isset($(this).attr("nk-arrow-offset"))){var o=NK.isset($(this).attr("nk-arrow-size"))?$(this).attr("nk-arrow-size").split(",").map(Number):[10,7],e=NK.isset($(this).attr("nk-offset"))?$(this).attr("nk-offset").split(",").map(Number):[0,0],r=NK.isset($(this).attr("nk-align"))?$(this).attr("nk-align").split(","):["top","center"],i=$(this).siblings(".NKPopup_src"),s=$(document.createElement("i"));s.addClass("NKPopup_arrow_stroke"),$(this).append(s);var n=$(document.createElement("i"));n.addClass("NKPopup_arrow_fill"),$(this).append(n);var l={border:1,stroke_border:[0,0,0,0],fill_border:[0,0,0,0],stroke_colors:["","","",""],fill_colors:["","","",""],left:[50,50],top:[0,0]};"top"===r[0]?(l.border=parseInt($(this).css("border-bottom-width").split("px")[0]),l.stroke_border=[o[1]+l.border,o[0]/2+l.border,0,o[0]/2+l.border],l.fill_border=[o[1],o[0]/2,0,o[0]/2],l.top=[$(this).innerHeight(),$(this).innerHeight()],l.stroke_colors[0]=$(this).css("border-bottom-color"),l.fill_colors[0]=$(this).css("background-color")):"bottom"===r[0]?(l.border=parseInt($(this).css("border-top-width").split("px")[0]),l.stroke_border=[0,o[0]/2+l.border,o[1]+l.border,o[0]/2+l.border],l.fill_border=[0,o[0]/2,o[1],o[0]/2],l.top=[-1*o[1]-1,-1*o[1]],l.stroke_colors[2]=$(this).css("border-top-color"),l.fill_colors[2]=$(this).css("background-color")):"right"===r[0]?(l.border=parseInt($(this).css("border-left-width").split("px")[0]),l.stroke_border=[o[0]/2+l.border,o[1]+l.border,o[0]/2+l.border,0],l.fill_border=[o[0]/2,o[1],o[0]/2,0],l.stroke_colors[1]=$(this).css("border-left-color"),l.fill_colors[1]=$(this).css("background-color"),l.left[0]=0-o[1]-l.border,l.left[1]=l.left[0]+l.border):"left"===r[0]&&(l.border=parseInt($(this).css("border-right-width").split("px")[0]),l.stroke_border=[o[0]/2+l.border,0,o[0]/2+l.border,o[1]+l.border],l.fill_border=[o[0]/2,0,o[0]/2,o[1]],l.stroke_colors[3]=$(this).css("border-right-color"),l.fill_colors[3]=$(this).css("background-color"),l.left[0]=$(this).innerWidth(),l.left[1]=l.left[0]),"left"===r[1]?(l.left[0]=$(this).outerWidth()-i.outerWidth()/2-o[0]/2-2*l.border,l.left[1]=l.left[0]+l.border):"center"===r[1]?(l.left[0]=$(this).outerWidth()/2-o[0]/2-2*l.border,l.left[1]=l.left[0]+l.border):"right"===r[1]?(l.left[0]=i.outerWidth()/2-o[0]/2-2*l.border,l.left[1]=l.left[0]+l.border):"top"===r[1]?(l.top[0]=$(this).outerHeight()-i.outerHeight()/2-o[0]/2-l.border,l.top[1]=l.top[0]+l.border):"middle"===r[1]?(l.top[0]=$(this).outerHeight()/2-o[0]/2-l.border,l.top[1]=l.top[0]+l.border):"bottom"===r[1]&&(l.top[0]=i.outerHeight()/2-o[0]/2-l.border,l.top[1]=l.top[0]+l.border),l.left[0]-=e[0],l.left[1]-=e[0],l.top[0]-=e[1],l.top[1]-=e[1],s.css("top",l.top[0]).css("left",l.left[0]).css("border-top-width",l.stroke_border[0]).css("border-right-width",l.stroke_border[1]).css("border-bottom-width",l.stroke_border[2]).css("border-left-width",l.stroke_border[3]).css("border-top-color",l.stroke_colors[0]).css("border-right-color",l.stroke_colors[1]).css("border-bottom-color",l.stroke_colors[2]).css("border-left-color",l.stroke_colors[3]),n.css("top",l.top[1]).css("left",l.left[1]).css("border-top-width",l.fill_border[0]).css("border-right-width",l.fill_border[1]).css("border-bottom-width",l.fill_border[2]).css("border-left-width",l.fill_border[3]).css("border-top-color",l.fill_colors[0]).css("border-right-color",l.fill_colors[1]).css("border-bottom-color",l.fill_colors[2]).css("border-left-color",l.fill_colors[3])}})};var NKPosition={};if(void 0===NK)throw"You must include base.js before position.js";NKPosition.start=function(){NK.isset(NKPosition.loaded)&&!0===NKPosition.loaded||(NKPosition.loaded=!0,NKPosition.mouse=[0,0],window.addEventListener("mousemove",function(t){NKPosition.mouse=[t.clientX,t.clientY]},!0))},NKPosition.getMouse=function(t){return t=t||!1,!0===t?NKPosition.mouse:[NKPosition.mouse[0]+window.scrollX,NKPosition.mouse[1]+window.scrollY]},NKPosition.getMouseX=function(t){return t=t||!1,!0===t?NKPosition.mouse[0]:NKPosition.mouse[0]+window.scrollX},NKPosition.getMouseY=function(t){return t=t||!1,!0===t?NKPosition.mouse[1]:NKPosition.mouse[1]+window.scrollY},NKPosition.getScroll=function(){return[window.scrollX,window.scrollY]},NKPosition.getScrollX=function(){return window.scrollX},NKPosition.getScrollY=function(){return window.scrollY},String.prototype.escape=function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;"};return this.replace(/[&<>]/g,function(o){return t[o]||o})};var NKRouting={routes:[]};NKRouting.get_url=function(){return[window.location.protocol+"//",window.location.host,window.location.pathname.split("/").slice(0,-1).join("/")+"/",window.location.pathname.split("/").pop(),window.location.search]},NKRouting.set_routes=function(t){NKRouting.routes[t.router_name]=t,NK.isset(t.default_section)&&$(document).ready(function(){NKRouting.go(t.router_name,t.default_section)})},NKRouting.go=function(t,o){if(NK.isset(NKRouting.routes[t])){var e=NKRouting.routes[t].sections[o];NK.isset(e)?NK.isset(e.get)?NKRouting._perform_get(t,o):NK.isset(e.show)&&NKRouting._perform_show(t,o):console.error("Routes for",t,"->",o,"not set.")}else console.error("Routes for",t,"not set.")},NKRouting._perform_show=function(t,o){var e=NKRouting.routes[t].container,r=NKRouting.routes[t].sections;if(NK.isset(e)){if(!NK.isset(r[o].content))for(var i in r)r[i].content=$(r[i].show).html(),$(r[i].show).html("");NKRouting._replace_content(t,o)}else{for(var i in r)$(r[i].show).hide();$(r[o].show).show()}NKRouting._run_controller(t,o)},NKRouting._perform_get=function(t,o){var e=NKRouting.routes[t].sections[o];NK.isset(e.loading)||(NK.isset(e.content)?(NKRouting._replace_content(t,o),NKRouting._run_controller(t,o)):(e.loading=!0,$.ajax({url:e.get,success:function(r){e.content=r,NKRouting._replace_content(t,o),delete e.loading,NKRouting._run_controller(t,o)}})))},NKRouting._replace_content=function(t,o){var e=NKRouting.routes[t].container,r=NKRouting.routes[t].sections[o].content;NKRouting.routes[t].sections[o].ctrl;$(e).html(r)},NKRouting._run_controller=function(router_name,section){var router=NKRouting.routes[router_name],ruta=NKRouting.routes[router_name].sections[section],controller_init=ruta.ctrl+".init",controller_enter=ruta.ctrl+".enter";if(NK.isset(router.last_section)){var last_controller=NKRouting.routes[router_name].sections[router.last_section].ctrl;NK.isset(last_controller)&&"function"===eval("typeof "+last_controller+".leave")&&eval(last_controller+".leave()")}if(router.last_section=section,NK.isset(ruta.ctrl)){var first_time=!NK.isset(ruta.loaded);ruta.loaded=!0,first_time&&"function"===eval("typeof "+controller_init)&&eval(controller_init+"()"),"function"===eval("typeof "+controller_enter)&&eval(controller_enter+"()")}};var NKStick={};if(void 0===NK)throw"You must include base.js before stick.js";NKStick.start=function(){NK.isset(NKStick.loaded)&&!0===NKStick.loaded||($.each($(".NKStickBD"),function(t,o){$(this).attr("nkdata-top",$(this).offset().top)}),window.addEventListener("load",NKStick.reload),window.addEventListener("resize",NKStick.reload),window.addEventListener("scroll",NKStick.reload),NKStick.loaded=!0)},NKStick.reload=function(){var t=$(document).height()>$(window).height(),o=$(document).scrollTop();t?$(".NKStickBN").removeClass("NKStickBO"):$(".NKStickBN").addClass("NKStickBO"),t&&($(".NKStickBD").removeClass("NKStickBO"),$.each($(".NKStickBD"),function(t,e){o+$(window).height()<$(this).offset().top+$(this).height()&&$(".NKStickBD").addClass("NKStickBO")}),$(".NKStickTD").removeClass("NKStickTO"),$.each($(".NKStickTD"),function(t,e){o>$(this).offset().top&&$(".NKStickTD").addClass("NKStickTO")}))};var NKStorage={};if(void 0===NK)throw"You must include base.js before storage.js";NKStorage.p=null,NKStorage.np=null,NKStorage.save=function(t){!0===t?(localStorage.setItem("NKStorage",JSON.stringify(NKStorage.p)),sessionStorage.setItem("NKStorage",JSON.stringify(NKStorage.np)),NKStorage.saveOnLeave=!1):NKStorage.saveOnLeave=!0},NKStorage.start=function(){if(!NK.isset(NKStorage.loaded)||!0!==NKStorage.loaded){try{NKStorage.p=JSON.parse(localStorage.getItem("NKStorage"))}catch(t){}NK.isset(NKStorage.p)||(localStorage.setItem("NKStorage",JSON.stringify("{}")),NKStorage.p=JSON.parse("{}"));try{NKStorage.np=JSON.parse(sessionStorage.getItem("NKStorage"))}catch(t){}NK.isset(NKStorage.np)||(sessionStorage.setItem("NKStorage",JSON.stringify("{}")),NKStorage.np=JSON.parse("{}")),NKStorage.loaded=!0}},NKStorage.oldLeaveHandler=window.onbeforeunload,window.onbeforeunload=function(t){NKStorage.oldLeaveHandler&&NKStorage.oldLeaveHandler(t),1==NKStorage.saveOnLeave&&NKStorage.save(!0)};