var NK={};NK.isset=function(t){return void 0!==t&&null!=t},NK.empty=function(t){return!NK.isset(t)||0==t.length},NK.core={},NK.core.reloadOnDomChange=function(t){NK.isset(NK.core.reactableModules)||(NK.core.reactableModules=[]),NK.core.reactableModules.push(t),NK.isset(NK.core.MutationObserver)||(MutationObserver=window.MutationObserver||window.WebKitMutationObserver,NK.core.MutationObserver=new MutationObserver(function(t,e){for(var o=0;o<NK.core.reactableModules.length;o++)void 0!==NK.core.reactableModules[o].reload&&NK.core.reactableModules[o].reload()}),NK.core.MutationObserver.observe(document,{subtree:!0}))};var NKActions={};if(void 0===NK)throw"You must include base.js before actions.js";NKActions.start=function(t){NK.isset(NKActions.loaded)&&!0===NKActions.loaded||(window.addEventListener("load",NKActions.reload),!0===t&&NK.core.reloadOnDomChange(NKActions),NKActions.loaded=!0)},NKActions.reload=function(){function t(t,e){var o=$(t).html();(o.toLowerCase().startsWith("hide")||o.toLowerCase().startsWith("show"))&&(o=o.substring(4)),o.length>0&&!o.startsWith(" ")&&(o=" "+o),e.is(":visible")?$(t).html("Hide"+o):$(t).html("Show"+o),console.log("entra")}$(".NKHide_btn").off().on("click",function(){$(this).closest(".NKHide_dst").hide()}),$(".NKDel_btn").off().on("click",function(){$(this).closest(".NKDel_dst").remove()}),$(".NKToggle_btn").off().on("click",function(){var e=$(this).siblings(".NKToggle_dst");e.toggle(),$(this).hasClass("NKReact")&&t(this,e)}),$(".NKToggle_btn.NKReact").each(function(){t(this,$(this).siblings(".NKToggle_dst"))}),$(".NKTemplate_btn").off().on("click",function(){var t=$(this).attr("class").split("NKTemplate_btn ")[1].split(" ")[0];$(".NKTemplate_dst."+t).append($(".NKTemplate_src."+t).clone(!0,!0).removeClass("NKTemplate_src").addClass("NKTemplate").show())})};var NKCast={};if(void 0===NK)throw"You must include base.js before cast.js";NKCast.intByteArray={toUtf16String:function(t){for(var e="",o=0;o<t.length;o++)(t[o]<0||t[o]>255)&&console.error("Error NKCast.intByteArray.toUtf16String(): ("+t[o]+") Out of range [0..255]"),e+=String.fromCharCode(t[o]);return e},toHexString:function(t,e,o){if(!NK.isset(t))return"";for(var n="",r=0;r<t.length;r++)o&&0!=r&&(n+=" "),n+=NKCast.intByte.toHexString(t[r],e);return n},toInt:function(t){for(var e=0,o=1,n=t.length-1;n>=0;n--)(t[n]<0||t[n]>255)&&console.error("Error NKCast.intByteArray.toUtf16String(): ("+t[n]+") Out of range [0..255]"),e+=t[n]*o,o*=256;return e}},NKCast.intByte={toHexString:function(t,e){return(t<0||t>255)&&console.error("Error NKCast.intByte.toHexString(): ("+t+") Out of range [0..255]"),e?"0x"+t.toString(16):t.toString(16)}},NKCast.utf16String={toIntByteArray:function(t){for(var e="",o=0;o<t.length;o++)e+=t.charCodeAt(o);return e}},NKCast.utf8String={toIntByteArray:function(t){return NKCast.utf16String.toIntByteArray(t)}};var NKForm={};if(void 0===NK)throw"You must include base.js before form.js";NKForm.errors={duplicated_fields:!0,invalid_json:!0},NKForm.getFields=function(t,e){var o={};return $(t+" :input").each(function(){if(!NK.empty(this.name))if("[]"===this.name.slice(-2)){var t=this.name.substr(0,this.name.length-2);NK.isset(o[t])||(o[t]=[]),o[t].push($(this).val())}else{if(NKForm.errors.duplicated_fields&&NK.isset(o[this.name]))throw"NKForm.getFields: Duplicated input field with name ("+this.name+")";o[this.name]=$(this).val()}}),!0===e?JSON.stringify(o):o},NKForm.setFields=function(t,e,o){if(!NK.empty(e)){if(!0===o)try{e=JSON.parse(e)}catch(t){if(NKForm.errors.invalid_json)throw"NKForm.setFields: Invalid input json. ("+e+")";return}$(t+" :input").each(function(){NK.empty(e[this.name])||$(this).val(e[this.name])})}},NKForm.send=function(t,e,o){$.post(e,NKForm.getFields(t),function(t,e){NK.isset(o)?o(t,e):location.reload()})},NKForm.fileChooser=function(t,e){e=e||"",$("body").append('<input type="file" id="tmpfile" accept="'+e+'">');var o=document.getElementById("tmpfile");o.addEventListener("change",function(e){t(e.path[0].value)},!1),$("#tmpfile").trigger("click"),o.parentNode.removeChild(o)};var NKLoader={};if(void 0===NK)throw"You must include base.js before loader.js";NKLoader.setSelector=function(t,e){$(t).css("display","none"),$(e).css("display","none"),window.setInterval(function(){$.active>0?$(t).css("display","block"):($.active=0,$(t).css("display","none"))},500),$(document).ajaxError(function(){$.active=0}),"localhost"!=document.domain&&(window.onerror=function(t,o,n){return $.active=0,NK.isset(e)&&$(e).css("display","block"),console.log("Error: ",t,o,n),!0})};var NKRouting={routes:[]};NKRouting.get_url=function(){return[window.location.protocol+"//",window.location.host,window.location.pathname.split("/").slice(0,-1).join("/")+"/",window.location.pathname.split("/").pop(),window.location.search]},NKRouting.set_routes=function(t){NKRouting.routes[t.router_name]=t,NK.isset(t.default_section)&&$(document).ready(function(){NKRouting.go(t.router_name,t.default_section)})},NKRouting.go=function(t,e){if(NK.isset(NKRouting.routes[t])){var o=NKRouting.routes[t].sections[e];NK.isset(o)?NK.isset(o.get)?NKRouting._perform_get(t,e):NK.isset(o.show)&&NKRouting._perform_show(t,e):console.error("Routes for",t,"->",e,"not set.")}else console.error("Routes for",t,"not set.")},NKRouting._perform_show=function(t,e){var o=NKRouting.routes[t].container,n=NKRouting.routes[t].sections;if(NK.isset(o)){if(!NK.isset(n[e].content))for(var r in n)n[r].content=$(n[r].show).html(),$(n[r].show).html("");NKRouting._replace_content(t,e)}else{for(var r in n)$(n[r].show).hide();$(n[e].show).show()}NKRouting._run_controller(t,e)},NKRouting._perform_get=function(t,e){var o=NKRouting.routes[t].sections[e];NK.isset(o.loading)||(NK.isset(o.content)?(NKRouting._replace_content(t,e),NKRouting._run_controller(t,e)):(o.loading=!0,$.ajax({url:o.get,success:function(n){o.content=n,NKRouting._replace_content(t,e),delete o.loading,NKRouting._run_controller(t,e)}})))},NKRouting._replace_content=function(t,e){var o=NKRouting.routes[t].container,n=NKRouting.routes[t].sections[e].content;NKRouting.routes[t].sections[e].ctrl;$(o).html(n)},NKRouting._run_controller=function(router_name,section){var router=NKRouting.routes[router_name],ruta=NKRouting.routes[router_name].sections[section],controller_init=ruta.ctrl+".init",controller_enter=ruta.ctrl+".enter";if(NK.isset(router.last_section)){var last_controller=NKRouting.routes[router_name].sections[router.last_section].ctrl;NK.isset(last_controller)&&"function"===eval("typeof "+last_controller+".leave")&&eval(last_controller+".leave()")}if(router.last_section=section,NK.isset(ruta.ctrl)){var first_time=!NK.isset(ruta.loaded);ruta.loaded=!0,first_time&&"function"===eval("typeof "+controller_init)&&eval(controller_init+"()"),"function"===eval("typeof "+controller_enter)&&eval(controller_enter+"()")}},String.prototype.escape=function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;"};return this.replace(/[&<>]/g,function(e){return t[e]||e})};var NKStick={};if(void 0===NK)throw"You must include base.js before stick.js";NKStick.start=function(){NK.isset(NKStick.loaded)&&!0===NKStick.loaded||($.each($(".NKStickBD"),function(t,e){$(this).attr("nkdata-top",$(this).offset().top)}),window.addEventListener("load",NKStick.reload),window.addEventListener("resize",NKStick.reload),window.addEventListener("scroll",NKStick.reload),NKStick.loaded=!0)},NKStick.reload=function(){var t=$(document).height()>$(window).height(),e=$(document).scrollTop();t?$(".NKStickBN").removeClass("NKStickBO"):$(".NKStickBN").addClass("NKStickBO"),t&&($(".NKStickBD").removeClass("NKStickBO"),$.each($(".NKStickBD"),function(t,o){e+$(window).height()<$(this).offset().top+$(this).height()&&$(".NKStickBD").addClass("NKStickBO")}),$(".NKStickTD").removeClass("NKStickTO"),$.each($(".NKStickTD"),function(t,o){e>$(this).offset().top&&$(".NKStickTD").addClass("NKStickTO")}))};var NKStorage={};if(void 0===NK)throw"You must include base.js before storage.js";NKStorage.p=null,NKStorage.np=null,NKStorage.save=function(t){!0===t?(localStorage.setItem("NKStorage",JSON.stringify(NKStorage.p)),sessionStorage.setItem("NKStorage",JSON.stringify(NKStorage.np)),NKStorage.saveOnLeave=!1):NKStorage.saveOnLeave=!0},NKStorage.start=function(){if(!NK.isset(NKStorage.loaded)||!0!==NKStorage.loaded){try{NKStorage.p=JSON.parse(localStorage.getItem("NKStorage"))}catch(t){}NK.isset(NKStorage.p)||(localStorage.setItem("NKStorage",JSON.stringify("{}")),NKStorage.p=JSON.parse("{}"));try{NKStorage.np=JSON.parse(sessionStorage.getItem("NKStorage"))}catch(t){}NK.isset(NKStorage.np)||(sessionStorage.setItem("NKStorage",JSON.stringify("{}")),NKStorage.np=JSON.parse("{}")),NKStorage.loaded=!0}},NKStorage.oldLeaveHandler=window.onbeforeunload,window.onbeforeunload=function(t){NKStorage.oldLeaveHandler&&NKStorage.oldLeaveHandler(t),1==NKStorage.saveOnLeave&&NKStorage.save(!0)};