var NK={};NK.isset=function(t){return void 0!==t&&null!=t},NK.empty=function(t){return!NK.isset(t)||0==t.length},NK.core={},NK.core.reloadOnDomChange=function(t){NK.isset(NK.core.reactableModules)||(NK.core.reactableModules=[]),NK.core.reactableModules.push(t),NK.isset(NK.core.MutationObserver)||(MutationObserver=window.MutationObserver||window.WebKitMutationObserver,NK.core.MutationObserver=new MutationObserver(function(t,o){for(var e=0;e<NK.core.reactableModules.length;e++)void 0!==NK.core.reactableModules[e].reload&&NK.core.reactableModules[e].reload()}),NK.core.MutationObserver.observe(document,{subtree:!0}))};var NKActions={};if(void 0===NK)throw"You must include base.js before actions.js";NKActions.start=function(t){NK.isset(NKActions.loaded)&&!0===NKActions.loaded||(window.addEventListener("load",NKActions.reload),!0===t&&NK.core.reloadOnDomChange(NKActions),NKActions.loaded=!0)},NKActions.reload=function(){function t(t,o){var e=$(t).html();(e.toLowerCase().startsWith("hide")||e.toLowerCase().startsWith("show"))&&(e=e.substring(4)),e.length>0&&!e.startsWith(" ")&&(e=" "+e),o.is(":visible")?$(t).html("Hide"+e):$(t).html("Show"+e),console.log("entra")}$(".NKHide_btn").off().on("click",function(){$(this).closest(".NKHide_dst").hide()}),$(".NKDel_btn").off().on("click",function(){$(this).closest(".NKDel_dst").remove()}),$(".NKToggle_btn").off().on("click",function(){var o=$(this).siblings(".NKToggle_dst");o.toggle(),$(this).hasClass("NKReact")&&t(this,o)}),$(".NKToggle_btn.NKReact").each(function(){t(this,$(this).siblings(".NKToggle_dst"))}),$(".NKTemplate_btn").off().on("click",function(){var t=$(this).attr("class").split("NKTemplate_btn ")[1].split(" ")[0];$(".NKTemplate_dst."+t).append($(".NKTemplate_src."+t).clone(!0,!0).removeClass("NKTemplate_src").addClass("NKTemplate").show())})};var NKCast={};if(void 0===NK)throw"You must include base.js before cast.js";NKCast.intByteArray={toUtf8String:function(t){for(var o="",e=0;e<t.length;e++)(t[e]<0||t[e]>255)&&console.error("Error NKCast.intByteArray.toUtf8String(): ("+t[e]+") Out of range [0..255]"),o+=String.fromCharCode(t[e]);return o},toUtf16String:function(t){return NKCast.intByteArray.toUtf8String(t)},toHexString:function(t,o,e){if(!NK.isset(t))return"";for(var n="",i=0;i<t.length;i++)e&&0!=i&&(n+=" "),n+=NKCast.intByte.toHexString(t[i],o);return n},toInt:function(t){for(var o=0,e=1,n=t.length-1;n>=0;n--)(t[n]<0||t[n]>255)&&console.error("Error NKCast.intByteArray.toUtf16String(): ("+t[n]+") Out of range [0..255]"),o+=t[n]*e,e*=256;return o}},NKCast.intByte={toHexString:function(t,o){return(t<0||t>255)&&console.error("Error NKCast.intByte.toHexString(): ("+t+") Out of range [0..255]"),o?"0x"+t.toString(16):t.toString(16)}},NKCast.utf16String={toIntByteArray:function(t){for(var o="",e=0;e<t.length;e++)o+=t.charCodeAt(e);return o}},NKCast.utf8String={toIntByteArray:function(t){return NKCast.utf16String.toIntByteArray(t)}};var NKForm={};if(void 0===NK)throw"You must include base.js before form.js";NKForm.errors={duplicated_fields:!0,invalid_json:!0},NKForm.getFields=function(t,o){var e={};return $(t+" :input").each(function(){if(!NK.empty(this.name))if("[]"===this.name.slice(-2)){var t=this.name.substr(0,this.name.length-2);NK.isset(e[t])||(e[t]=[]),e[t].push($(this).val())}else{if(NKForm.errors.duplicated_fields&&NK.isset(e[this.name]))throw"NKForm.getFields: Duplicated input field with name ("+this.name+")";e[this.name]=$(this).val()}}),!0===o?JSON.stringify(e):e},NKForm.setFields=function(t,o,e){if(!NK.empty(o)){if(!0===e)try{o=JSON.parse(o)}catch(t){if(NKForm.errors.invalid_json)throw"NKForm.setFields: Invalid input json. ("+o+")";return}$(t+" :input").each(function(){NK.empty(o[this.name])||$(this).val(o[this.name])})}},NKForm.send=function(t,o,e){$.post(o,NKForm.getFields(t),function(t,o){NK.isset(e)?e(t,o):location.reload()})},NKForm.fileChooser=function(t,o){o=o||"",$("body").append('<input type="file" id="tmpfile" accept="'+o+'">');var e=document.getElementById("tmpfile");e.addEventListener("change",function(o){t(o.path[0].value)},!1),$("#tmpfile").trigger("click"),e.parentNode.removeChild(e)};var NKLoader={};if(void 0===NK)throw"You must include base.js before loader.js";NKLoader.setSelector=function(t,o){$(t).css("display","none"),$(o).css("display","none"),window.setInterval(function(){$.active>0?$(t).css("display","block"):($.active=0,$(t).css("display","none"))},500),$(document).ajaxError(function(){$.active=0}),"localhost"!=document.domain&&(window.onerror=function(t,e,n){return $.active=0,NK.isset(o)&&$(o).css("display","block"),console.log("Error: ",t,e,n),!0})};var NKPosition={};if(void 0===NK)throw"You must include base.js before position.js";NKPosition.start=function(){NK.isset(NKPosition.loaded)&&!0===NKPosition.loaded||(NKPosition.loaded=!0,NKPosition.mouse=[0,0],window.addEventListener("mousemove",function(t){NKPosition.mouse=[t.clientX,t.clientY]},!0))},NKPosition.getMouse=function(t){return!0===t?NKPosition.mouse:[NKPosition.mouse[0]+window.scrollX,NKPosition.mouse[1]+window.scrollY]},NKPosition.getMouseX=function(){return!0===absolute?NKPosition.mouse[0]:NKPosition.mouse[0]+window.scrollX},NKPosition.getMouseY=function(){return!0===absolute?NKPosition.mouse[1]:NKPosition.mouse[1]+window.scrollY},NKPosition.getScroll=function(){return[window.scrollX,window.scrollY]},NKPosition.getScrollX=function(){return window.scrollX},NKPosition.getScrollY=function(){return window.scrollY},String.prototype.escape=function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;"};return this.replace(/[&<>]/g,function(o){return t[o]||o})};var NKRouting={routes:[]};NKRouting.get_url=function(){return[window.location.protocol+"//",window.location.host,window.location.pathname.split("/").slice(0,-1).join("/")+"/",window.location.pathname.split("/").pop(),window.location.search]},NKRouting.set_routes=function(t){NKRouting.routes[t.router_name]=t,NK.isset(t.default_section)&&$(document).ready(function(){NKRouting.go(t.router_name,t.default_section)})},NKRouting.go=function(t,o){if(NK.isset(NKRouting.routes[t])){var e=NKRouting.routes[t].sections[o];NK.isset(e)?NK.isset(e.get)?NKRouting._perform_get(t,o):NK.isset(e.show)&&NKRouting._perform_show(t,o):console.error("Routes for",t,"->",o,"not set.")}else console.error("Routes for",t,"not set.")},NKRouting._perform_show=function(t,o){var e=NKRouting.routes[t].container,n=NKRouting.routes[t].sections;if(NK.isset(e)){if(!NK.isset(n[o].content))for(var i in n)n[i].content=$(n[i].show).html(),$(n[i].show).html("");NKRouting._replace_content(t,o)}else{for(var i in n)$(n[i].show).hide();$(n[o].show).show()}NKRouting._run_controller(t,o)},NKRouting._perform_get=function(t,o){var e=NKRouting.routes[t].sections[o];NK.isset(e.loading)||(NK.isset(e.content)?(NKRouting._replace_content(t,o),NKRouting._run_controller(t,o)):(e.loading=!0,$.ajax({url:e.get,success:function(n){e.content=n,NKRouting._replace_content(t,o),delete e.loading,NKRouting._run_controller(t,o)}})))},NKRouting._replace_content=function(t,o){var e=NKRouting.routes[t].container,n=NKRouting.routes[t].sections[o].content;NKRouting.routes[t].sections[o].ctrl;$(e).html(n)},NKRouting._run_controller=function(router_name,section){var router=NKRouting.routes[router_name],ruta=NKRouting.routes[router_name].sections[section],controller_init=ruta.ctrl+".init",controller_enter=ruta.ctrl+".enter";if(NK.isset(router.last_section)){var last_controller=NKRouting.routes[router_name].sections[router.last_section].ctrl;NK.isset(last_controller)&&"function"===eval("typeof "+last_controller+".leave")&&eval(last_controller+".leave()")}if(router.last_section=section,NK.isset(ruta.ctrl)){var first_time=!NK.isset(ruta.loaded);ruta.loaded=!0,first_time&&"function"===eval("typeof "+controller_init)&&eval(controller_init+"()"),"function"===eval("typeof "+controller_enter)&&eval(controller_enter+"()")}};var NKStick={};if(void 0===NK)throw"You must include base.js before stick.js";NKStick.start=function(){NK.isset(NKStick.loaded)&&!0===NKStick.loaded||($.each($(".NKStickBD"),function(t,o){$(this).attr("nkdata-top",$(this).offset().top)}),window.addEventListener("load",NKStick.reload),window.addEventListener("resize",NKStick.reload),window.addEventListener("scroll",NKStick.reload),NKStick.loaded=!0)},NKStick.reload=function(){var t=$(document).height()>$(window).height(),o=$(document).scrollTop();t?$(".NKStickBN").removeClass("NKStickBO"):$(".NKStickBN").addClass("NKStickBO"),t&&($(".NKStickBD").removeClass("NKStickBO"),$.each($(".NKStickBD"),function(t,e){o+$(window).height()<$(this).offset().top+$(this).height()&&$(".NKStickBD").addClass("NKStickBO")}),$(".NKStickTD").removeClass("NKStickTO"),$.each($(".NKStickTD"),function(t,e){o>$(this).offset().top&&$(".NKStickTD").addClass("NKStickTO")}))};var NKStorage={};if(void 0===NK)throw"You must include base.js before storage.js";NKStorage.p=null,NKStorage.np=null,NKStorage.save=function(t){!0===t?(localStorage.setItem("NKStorage",JSON.stringify(NKStorage.p)),sessionStorage.setItem("NKStorage",JSON.stringify(NKStorage.np)),NKStorage.saveOnLeave=!1):NKStorage.saveOnLeave=!0},NKStorage.start=function(){if(!NK.isset(NKStorage.loaded)||!0!==NKStorage.loaded){try{NKStorage.p=JSON.parse(localStorage.getItem("NKStorage"))}catch(t){}NK.isset(NKStorage.p)||(localStorage.setItem("NKStorage",JSON.stringify("{}")),NKStorage.p=JSON.parse("{}"));try{NKStorage.np=JSON.parse(sessionStorage.getItem("NKStorage"))}catch(t){}NK.isset(NKStorage.np)||(sessionStorage.setItem("NKStorage",JSON.stringify("{}")),NKStorage.np=JSON.parse("{}")),NKStorage.loaded=!0}},NKStorage.oldLeaveHandler=window.onbeforeunload,window.onbeforeunload=function(t){NKStorage.oldLeaveHandler&&NKStorage.oldLeaveHandler(t),1==NKStorage.saveOnLeave&&NKStorage.save(!0)};