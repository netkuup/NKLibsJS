var NK={};function NKEventListener(){this.events={},this.addEventListener=function(e,t){NK.isset(this.events[e])||(this.events[e]=[]),this.events[e].push(t)},this.removeEventListener=function(e,t){for(var o=0;o<this.events[e].length;o++)if(this.events[e][o]===t){this.events[e].splice(o,1);break}},this.dispatchEvent=function(e,t){if(NK.isset(this.events[e]))for(var o=0;o<this.events[e].length;o++)(0,this.events[e][o])(t)}}if(NK.isset=function(e){if(void 0===e)return!1;if(null==e)return!1;if("function"==typeof e)try{e()}catch(e){return!1}return!0},NK.empty=function(e){return!NK.isset(e)||0===(e="function"==typeof e?e():e).length},NK.clone=function(e){return JSON.parse(JSON.stringify(e))},NK.backtrace=function(e=""){var t=(new Error).stack.split("\n").slice(2).join("\n");console.log("Backtrace: "+e+"\n"+t)},!NK.isset(()=>$))throw"Error, you must include jquery before using NKLibsJS";NK.core={},NK.core.reloadOnDomChange=function(e){NK.isset(NK.core.reactableModules)||(NK.core.reactableModules=[]),NK.core.reactableModules.push(e),NK.isset(NK.core.MutationObserver)||(MutationObserver=window.MutationObserver||window.WebKitMutationObserver,NK.core.MutationObserverOffset=1,NK.core.MutationObserver=new MutationObserver(function(e,t){if(0<NK.core.MutationObserverOffset)NK.core.MutationObserverOffset--;else for(var o=0;o<NK.core.reactableModules.length;o++)void 0!==NK.core.reactableModules[o].reload&&NK.core.reactableModules[o].reload()}),NK.core.MutationObserver.observe(document,{subtree:!0,childList:!0}))},NK.core.ignoreMutations=function(e){NK.isset(NK.core.MutationObserver)&&(NK.core.MutationObserverOffset+=e)},window.addEventListener("load",function(){window.loaded=!0});var NKActions={};if(void 0===NK)throw"You must include base.js before actions.js";NKActions.start=function(e){NK.isset(NKActions.loaded)&&!0===NKActions.loaded||(window.addEventListener("load",NKActions.reload),!0===window.loaded&&NKActions.reload(),!0===e&&NK.core.reloadOnDomChange(NKActions),NKActions.loaded=!0)},NKActions.reload=function(){function t(e,t){var o=$(e).html();0<(o=o.toLowerCase().startsWith("hide")||o.toLowerCase().startsWith("show")?o.substring(4):o).length&&!o.startsWith(" ")&&(o=" "+o),t.is(":visible")?$(e).html("Hide"+o):$(e).html("Show"+o),console.log("entra")}$(".NKHide_btn").off().on("click",function(){$(this).closest(".NKHide_dst").hide()}),$(".NKDel_btn").off().on("click",function(){$(this).closest(".NKDel_dst").remove()}),$(".NKToggle_btn").off().on("click",function(){var e=$(this).siblings(".NKToggle_dst");e.toggle(),$(this).hasClass("NKReact")&&t(this,e)}),$(".NKToggle_btn.NKReact").each(function(){t(this,$(this).siblings(".NKToggle_dst"))}),$(".NKTemplate_btn").off().on("click",function(){var e=$(this).attr("class").split("NKTemplate_btn ")[1].split(" ")[0];$(".NKTemplate_dst."+e).append($(".NKTemplate_src."+e).clone(!0,!0).removeClass("NKTemplate_src").addClass("NKTemplate").show())})};var NKCast={};if(void 0===NK)throw"You must include base.js before cast.js";NKCast.intByteArray={toUtf8String:function(e){for(var t="",o=0;o<e.length;o++)(e[o]<0||255<e[o])&&console.error("Error NKCast.intByteArray.toUtf8String(): ("+e[o]+") Out of range [0..255]"),t+=String.fromCharCode(e[o]);return t},toUtf16String:function(e){return NKCast.intByteArray.toUtf8String(e)},toHexString:function(e,t,o){if(!NK.isset(e))return"";for(var s="",r=0;r<e.length;r++)o&&0!=r&&(s+=" "),s+=NKCast.intByte.toHexString(e[r],t);return s},toInt:function(e){for(var t=0,o=1,s=e.length-1;0<=s;s--)(e[s]<0||255<e[s])&&console.error("Error NKCast.intByteArray.toUtf16String(): ("+e[s]+") Out of range [0..255]"),t+=e[s]*o,o*=256;return t}},NKCast.intByte={toHexString:function(e,t){return(e<0||255<e)&&console.error("Error NKCast.intByte.toHexString(): ("+e+") Out of range [0..255]"),t?"0x"+e.toString(16):e.toString(16)}},NKCast.utf16String={toIntByteArray:function(e){for(var t="",o=0;o<e.length;o++)t+=e.charCodeAt(o);return t}},NKCast.utf8String={toIntByteArray:function(e){return NKCast.utf16String.toIntByteArray(e)}};var NKContextMenu={};if(void 0===NK)throw"You must include base.js before context_menu.js";var event_listener=new NKEventListener,NKContextMenu={...event_listener,start:function(){if(!NK.isset(NKContextMenu.loaded)||!0!==NKContextMenu.loaded){if(NKContextMenu.loaded=!0,void 0===NKPosition)throw"You must include position.js";var e;NKPosition.start(),$("#NKContextMenu").length<1&&((e=document.createElement("div")).setAttribute("id","NKContextMenu"),document.body.appendChild(e)),$("#NKContextMenu").hide();var o=null;document.addEventListener("contextmenu",function(e){var t=e.target;o=t,NKContextMenu.dispatchEvent("onOpen",{target:t}),0===$("#NKContextMenu").children().length?$("#NKContextMenu").hide():($("#NKContextMenu").show(),$("#NKContextMenu .NKSubmenu").hide(),$("#NKContextMenu").css("left",NKPosition.getMouseX()),$("#NKContextMenu").css("top",NKPosition.getMouseY()),e.preventDefault())}),document.addEventListener("mouseup",function(e){2!==e.button&&$("#NKContextMenu").is(":visible")&&(e=e.target,$(e).hasClass("NKItem")?NKContextMenu.dispatchEvent("onClose",{id:e.getAttribute("data-id"),text:$(e).children(".NKTitle").text(),target:o,button:e}):NKContextMenu.dispatchEvent("onClose",{id:null,target:o,button:null}),$("#NKContextMenu").hide())}),NKContextMenu.refresh()}}};NKContextMenu.setContent=function(e){var t=[];function n(e,t,o,s){var r=$(document.createElement("div")),i=$(document.createElement("div")),n=$(document.createElement("div"));return r.addClass("NKItem"),i.addClass("NKIcon"),n.addClass("NKTitle"),r.attr("data-id",e),n.text(t),NK.empty(o)||(i.append(o),i.css("margin-right","5px")),r.append(i),r.append(n),null!==s&&((n=$(document.createElement("div"))).addClass("NKSubmenu"),n.append(s),r.addClass("NKArrow"),r.append(n)),r}NK.empty(e)||(t=function e(t){for(var o=[],s=0;s<t.length;s++){var r,i=t[s];"item"===i.type?o.push(n(i.id,i.text,i.icon,null)):"menu"===i.type?(r=e(i.items),o.push(n(i.id,i.text,i.icon,r))):"divider"===i.type&&((i=$(document.createElement("div"))).addClass("NKDivider"),o.push(i))}return o}(e));e=$("#NKContextMenu");e.empty(),e.append(t),NKContextMenu.refresh()},NKContextMenu.refresh=function(){$(".NKItem").off(),$(".NKSubmenu").hide(),$(".NKItem").on("mouseenter",function(){var e=$(this);$(this).parent().find(".NKSubmenu").hide();var t=$(this).children(".NKSubmenu");1===t.length&&(t.show(),t.css("left",e.width()+30))})};var NKDrag={},event_listener=new NKEventListener,NKDrag={...event_listener,selection:{element:null},start:function(e){if(!NK.isset(NKDrag.loaded)||!0!==NKDrag.loaded){if(NKDrag.loaded=!0,void 0===NKPosition)throw"You must include position.js";NKPosition.start(),window.addEventListener("load",NKDrag.reload),!0===window.loaded&&NKDrag.reload(),!0===e&&NK.core.reloadOnDomChange(NKDrag),$(document).on("mousemove",function(){var e,t;null!=NKDrag.selection.element&&(e=NKPosition.getMouseX()-NKDrag.selection.offset[0],t=NKPosition.getMouseY()-NKDrag.selection.offset[1],NKDrag.selection.element.offset({left:e,top:t}),NKDrag.dispatchEvent("onDrag",{e:NKDrag.selection.element,left:e,top:t}))})}},reload:function(){$(".NKDrag_src").on("mousedown",function(){NKDrag.selection.element=$(this).closest(".NKDrag_dst"),NKDrag.selection.offset=NKPosition.getMouse();var e=NKDrag.selection.element.offset();NKDrag.selection.offset[0]-=e.left,NKDrag.selection.offset[1]-=e.top}),$(".NKDrag_src").on("mouseup",function(){NKDrag.selection.element=null})}},NKForm={};if(void 0===NK)throw"You must include base.js before form.js";NKForm.errors={duplicated_fields:!0,invalid_json:!0},NKForm.getFields=function(e,t){var o={};return $(e+" :input").each(function(){if(!NK.empty(this.name))if("[]"===this.name.slice(-2)){var e=this.name.substr(0,this.name.length-2);NK.isset(o[e])||(o[e]=[]),o[e].push($(this).val())}else{if(NKForm.errors.duplicated_fields&&NK.isset(o[this.name]))throw"NKForm.getFields: Duplicated input field with name ("+this.name+")";e=$(this).attr("type");o[this.name]="checkbox"===e?$(this).prop("checked"):$(this).val()}}),!0===t?JSON.stringify(o):o},NKForm.setFields=function(e,t,o){if(!NK.empty(t)){if(!0===o)try{t=JSON.parse(t)}catch(e){if(NKForm.errors.invalid_json)throw"NKForm.setFields: Invalid input json. ("+t+")";return}$(e+" :input").each(function(){NK.empty(t[this.name])||("checkbox"===$(this).attr("type")?$(this).prop("checked",/^(true|1)$/i.test(t[this.name])):$(this).val(t[this.name]))})}},NKForm.clearFields=function(e){$(e+" :input").each(function(){"checkbox"===$(this).attr("type")?$(this).prop("checked",!1):$(this).val("")})},NKForm.send=function(e,t,o){$.post(t,NKForm.getFields(e),function(e,t){NK.isset(o)?o(e,t):location.reload()})},NKForm.fileChooser=function(t,e){e=e||"",$("body").append('<input type="file" id="NKtmpfile" accept="'+e+'">');e=document.getElementById("NKtmpfile");e.addEventListener("change",function(e){t(e.path[0].value)},!1),$("#NKtmpfile").trigger("click"),e.parentNode.removeChild(e)},NKForm.dirChooser=function(t){$("body").append('<input type="file" id="NKtmpfile" webkitdirectory directory multiple/>');var e=document.getElementById("NKtmpfile");e.addEventListener("change",function(e){t(e.path[0].value)},!1),$("#NKtmpfile").trigger("click"),e.parentNode.removeChild(e)};var NKLoader={};if(void 0===NK)throw"You must include base.js before loader.js";NKLoader.setSelector=function(e,s){$(e).css("display","none"),$(s).css("display","none"),window.setInterval(function(){0<$.active?$(e).css("display","block"):($.active=0,$(e).css("display","none"))},500),$(document).ajaxError(function(){$.active=0}),"localhost"!=document.domain&&(window.onerror=function(e,t,o){return $.active=0,NK.isset(s)&&$(s).css("display","block"),console.log("Error: ",e,t,o),!0})};var NKModal={config:{add_close_icon:!0,close_on_click_outside:!0},reload:function(){$(".NKModal .NKCloseIcon").off().on("click",function(){$(this).parents(".NKModal").hide()}),NKModal.config.close_on_click_outside&&$(".NKModal").off().on("click",function(e){e.target===this&&$(this).hide()})},show:function(e){var t,o,s="#"+e;0!==$(s).length?(0===(t=$(".NKModal "+s)).length&&(o='<div class="NKModal '+e+'">            <div class="NKContent">                '+(NKModal.config.add_close_icon?'<i class="NKCloseIcon"></i>':"")+"            </div>        </div>",$(s).after(o),$(s).appendTo(".NKModal."+e+" .NKContent"),$(s).show(),NKModal.reload()),$(s).parents(".NKModal").show(),t.show()):console.error("Element "+s+" not found.")},hide:function(e){e="#"+e;0!==$(".NKModal "+e).length&&$(e).parents(".NKModal").hide()},toggle:function(e){0!==$(".NKModal #"+e).length&&$("#"+e).parents(".NKModal").is(":visible")?NKModal.hide(e):NKModal.show(e)}},NKPopup={};if(void 0===NK)throw"You must include base.js before popup.js";NKPopup.config={allow_hover:!0,mouse_margin:5,box_margin:5},NKPopup.start=function(e){if(!NK.isset(NKPopup.loaded)||!0!==NKPopup.loaded){if(NKPopup.loaded=!0,void 0===NKPosition)throw"You must include position.js";NKPosition.start(),window.addEventListener("load",NKPopup.reload),!0===window.loaded&&NKPopup.reload(),!0===e&&NK.core.reloadOnDomChange(NKPopup)}},NKPopup.reload=function(){$(".NKPopup_dst").hide(),$(".NKPopup_src").off(),$(".NKPopup_src").on("mousemove",function(){var e=$(this).siblings(".NKPopup_dst"),t=NK.isset(e.attr("nk-type"))?e.attr("nk-type"):"box",o=NK.isset(e.attr("nk-align"))?e.attr("nk-align").split(","):["top","center"],s=NK.isset(e.attr("nk-offset"))?e.attr("nk-offset").split(",").map(Number):[0,0],r=NK.isset(e.attr("nk-arrow-size"))?e.attr("nk-arrow-size").split(",").map(Number)[1]:0,i=e.attr("nk-x"),n=e.attr("nk-y");e.show();var l={};if("mouse"===t)var a=[10,22],c=NKPosition.getMouse(),d=NKPopup.config.mouse_margin;else{if("box"!==t)throw"Invalid type: "+t;a=[$(this).outerWidth(),$(this).outerHeight()],c=[$(this).offset().left,$(this).offset().top],d=NKPopup.config.box_margin}if("top"===o[0]||"bottom"===o[0]){if(NK.isset(o[1])&&"center"!==o[1])if("left"===o[1])l={left:c[0]-e.outerWidth()+a[0],top:c[1]-e.outerHeight()-r-d};else{if("right"!==o[1])throw"Invalid param '"+o[1]+"'";l={left:c[0],top:c[1]-e.outerHeight()-r-d}}else l={left:c[0]-e.outerWidth()/2+a[0]/2,top:c[1]-e.outerHeight()-r-d};"bottom"===o[0]&&(l.top+=a[1]+e.outerHeight()+2*r+2*d)}else{if("left"!==o[0]&&"right"!==o[0])throw"Invalid param '"+o[0]+"'";if(NK.isset(o[1])&&"middle"!==o[1])if("top"===o[1])l={left:c[0]-e.outerWidth()-d-r,top:c[1]-e.outerHeight()+a[1]};else{if("bottom"!==o[1])throw"Invalid param '"+o[1]+"'";l={left:c[0]-e.outerWidth()-d-r,top:c[1]}}else l={left:c[0]-e.outerWidth()-d-r,top:c[1]-e.outerHeight()/2+a[1]/2};"right"===o[0]&&(l.left+=a[0]+e.outerWidth()+2*r+2*d)}l.left=l.left+s[0],l.top=l.top+s[1],NK.isset(i)&&(l.left=i),NK.isset(n)&&(l.top=n),e.offset(l)}),$(".NKPopup_src").on("mouseleave",function(){var e=$(this);NKPopup.config.allow_hover?window.setTimeout(function(){0==e.siblings(".NKPopup_dst:hover").length?e.siblings(".NKPopup_dst").hide():e.siblings(".NKPopup_dst:hover").on("mouseleave",function(){$(this).off().hide()})},50):e.siblings(".NKPopup_dst").hide()}),NK.core.ignoreMutations(1),$(".NKPopup_dst").each(function(e){var t,o,s,r,i,n,l;(NK.isset($(this).attr("nk-arrow-size"))||NK.isset($(this).attr("nk-arrow-offset")))&&(t=NK.isset($(this).attr("nk-arrow-size"))?$(this).attr("nk-arrow-size").split(",").map(Number):[10,7],o=NK.isset($(this).attr("nk-offset"))?$(this).attr("nk-offset").split(",").map(Number):[0,0],s=NK.isset($(this).attr("nk-align"))?$(this).attr("nk-align").split(","):["top","center"],r=$(this).siblings(".NKPopup_src"),(i=$(document.createElement("i"))).addClass("NKPopup_arrow_stroke"),$(this).append(i),(n=$(document.createElement("i"))).addClass("NKPopup_arrow_fill"),$(this).append(n),l={border:1,stroke_border:[0,0,0,0],fill_border:[0,0,0,0],stroke_colors:["","","",""],fill_colors:["","","",""],left:[50,50],top:[0,0]},"top"===s[0]?(l.border=parseInt($(this).css("border-bottom-width").split("px")[0]),l.stroke_border=[t[1]+l.border,t[0]/2+l.border,0,t[0]/2+l.border],l.fill_border=[t[1],t[0]/2,0,t[0]/2],l.top=[$(this).innerHeight(),$(this).innerHeight()],l.stroke_colors[0]=$(this).css("border-bottom-color"),l.fill_colors[0]=$(this).css("background-color")):"bottom"===s[0]?(l.border=parseInt($(this).css("border-top-width").split("px")[0]),l.stroke_border=[0,t[0]/2+l.border,t[1]+l.border,t[0]/2+l.border],l.fill_border=[0,t[0]/2,t[1],t[0]/2],l.top=[-1*t[1]-1,-1*t[1]],l.stroke_colors[2]=$(this).css("border-top-color"),l.fill_colors[2]=$(this).css("background-color")):"right"===s[0]?(l.border=parseInt($(this).css("border-left-width").split("px")[0]),l.stroke_border=[t[0]/2+l.border,t[1]+l.border,t[0]/2+l.border,0],l.fill_border=[t[0]/2,t[1],t[0]/2,0],l.stroke_colors[1]=$(this).css("border-left-color"),l.fill_colors[1]=$(this).css("background-color"),l.left[0]=0-t[1]-l.border,l.left[1]=l.left[0]+l.border):"left"===s[0]&&(l.border=parseInt($(this).css("border-right-width").split("px")[0]),l.stroke_border=[t[0]/2+l.border,0,t[0]/2+l.border,t[1]+l.border],l.fill_border=[t[0]/2,0,t[0]/2,t[1]],l.stroke_colors[3]=$(this).css("border-right-color"),l.fill_colors[3]=$(this).css("background-color"),l.left[0]=$(this).innerWidth(),l.left[1]=l.left[0]),"left"===s[1]?(l.left[0]=$(this).outerWidth()-r.outerWidth()/2-t[0]/2-2*l.border,l.left[1]=l.left[0]+l.border):"center"===s[1]?(l.left[0]=$(this).outerWidth()/2-t[0]/2-2*l.border,l.left[1]=l.left[0]+l.border):"right"===s[1]?(l.left[0]=r.outerWidth()/2-t[0]/2-2*l.border,l.left[1]=l.left[0]+l.border):"top"===s[1]?(l.top[0]=$(this).outerHeight()-r.outerHeight()/2-t[0]/2-l.border,l.top[1]=l.top[0]+l.border):"middle"===s[1]?(l.top[0]=$(this).outerHeight()/2-t[0]/2-l.border,l.top[1]=l.top[0]+l.border):"bottom"===s[1]&&(l.top[0]=r.outerHeight()/2-t[0]/2-l.border,l.top[1]=l.top[0]+l.border),l.left[0]-=o[0],l.left[1]-=o[0],l.top[0]-=o[1],l.top[1]-=o[1],i.css("top",l.top[0]).css("left",l.left[0]).css("border-top-width",l.stroke_border[0]).css("border-right-width",l.stroke_border[1]).css("border-bottom-width",l.stroke_border[2]).css("border-left-width",l.stroke_border[3]).css("border-top-color",l.stroke_colors[0]).css("border-right-color",l.stroke_colors[1]).css("border-bottom-color",l.stroke_colors[2]).css("border-left-color",l.stroke_colors[3]),n.css("top",l.top[1]).css("left",l.left[1]).css("border-top-width",l.fill_border[0]).css("border-right-width",l.fill_border[1]).css("border-bottom-width",l.fill_border[2]).css("border-left-width",l.fill_border[3]).css("border-top-color",l.fill_colors[0]).css("border-right-color",l.fill_colors[1]).css("border-bottom-color",l.fill_colors[2]).css("border-left-color",l.fill_colors[3]))})};var NKPosition={};if(void 0===NK)throw"You must include base.js before position.js";NKPosition.start=function(){NK.isset(NKPosition.loaded)&&!0===NKPosition.loaded||(NKPosition.loaded=!0,NKPosition.mouse=[0,0],window.addEventListener("mousemove",function(e){NKPosition.mouse=[e.clientX,e.clientY]},!0))},NKPosition.getMouse=function(e){return!0===(e=e||!1)?NKPosition.mouse:[NKPosition.mouse[0]+window.scrollX,NKPosition.mouse[1]+window.scrollY]},NKPosition.getMouseX=function(e){return!0===(e=e||!1)?NKPosition.mouse[0]:NKPosition.mouse[0]+window.scrollX},NKPosition.getMouseY=function(e){return!0===(e=e||!1)?NKPosition.mouse[1]:NKPosition.mouse[1]+window.scrollY},NKPosition.getScroll=function(){return[window.scrollX,window.scrollY]},NKPosition.getScrollX=function(){return window.scrollX},NKPosition.getScrollY=function(){return window.scrollY},String.prototype.escape=function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;"};return this.replace(/[&<>]/g,function(e){return t[e]||e})};var NKResize={};if(void 0===NK)throw"You must include base.js before context_menu.js";var event_listener=new NKEventListener,NKResize={...event_listener,config:{column_resize_cursor:"col-resize",row_resize_cursor:"row-resize"},start:function(e){if(!NK.isset(NKResize.loaded)||!0!==NKResize.loaded){if(NKResize.loaded=!0,void 0===NKPosition)throw"You must include position.js";NKPosition.start(),window.addEventListener("load",NKResize.reload),!0===window.loaded&&NKResize.reload(),!0===e&&NK.core.reloadOnDomChange(NKResize)}},reload:function(){function K(e,t,o,s){var r=[],i=[],n=parseFloat(t.attr("nk-i"));if(n===(r=(s?e.css("grid-template-columns"):e.css("grid-template-rows")).split(" ")).length-1)return r.join(" ");for(var l=0;l<r.length;l++)l===n?i.push(o+"px"):l===n+1?i.push("auto"):i.push(r[l]);return i}function e(e){var t,o,s,r,i,n,l,a=[$(this).offset().left,$(this).offset().top],c=NKPosition.getMouse(),d=[c[0]-a[0],c[1]-a[1]],u=[$(this).width(),$(this).height()],N=u[0]-5<=d[0],a=u[1]-5<=d[1],d=$(this).is(":last-child"),e=e.type;"mousedown"===e?(N&&!d&&(NKResize.resizing_vertical_element=this,NKResize.start_columns=$(this).parent().css("grid-template-columns").split(" "),NKResize.start_pos=c,NKResize.start_size=u,$(".NKDrag_columns").children("div").children().addClass("NKResize_disable_temp")),a&&!d&&(NKResize.resizing_horizontal_element=this,NKResize.start_rows=$(this).parent().css("grid-template-rows").split(" "),NKResize.start_pos=c,NKResize.start_size=u,$(".NKDrag_rows").children("div").children().addClass("NKResize_disable_temp"))):"mousemove"===e?(r=NKResize.resizing_vertical_element,i=NKResize.resizing_horizontal_element,null!==r?(t=$(r).parent(),o=parseInt($(r).css("border-right-width").slice(0,-2)),o=NKResize.start_size[0]+(c[0]-NKResize.start_pos[0])+o,s=K(t,$(r),o,!0),t.css("grid-template-columns",s.join(" ")),t.children("div").each(function(e){$(this).attr("nk-width",s[e])}),$(this).css("cursor",NKResize.config.column_resize_cursor)):null!==i?(t=$(i).parent(),o=parseInt($(i).css("border-bottom-width").slice(0,-2)),o=NKResize.start_size[1]+(c[1]-NKResize.start_pos[1])+o,s=K(t,$(i),o,!1),t.css("grid-template-rows",s.join(" ")),t.children("div").each(function(e){$(this).attr("nk-height",s[e])}),$(this).css("cursor",NKResize.config.row_resize_cursor)):N&&!d&&$(this).parent().hasClass("NKDrag_columns")?$(this).css("cursor",NKResize.config.column_resize_cursor):a&&!d&&$(this).parent().hasClass("NKDrag_rows")?$(this).css("cursor",NKResize.config.row_resize_cursor):$(this).css("cursor","")):"mouseup"===e&&(r=NKResize.resizing_vertical_element,i=NKResize.resizing_horizontal_element,null!==r&&(n=$(r).parent().css("grid-template-columns").split(" "),l=parseFloat($(r).attr("nk-i")),NKResize.dispatchEvent("onResize",{start:NKResize.start_columns,end:n,i:l,e:$(r)[0],parent:$(r).parent()[0]}),$(".NKDrag_columns").children("div").children().removeClass("NKResize_disable_temp")),null!==i&&(n=$(i).parent().css("grid-template-rows").split(" "),l=parseFloat($(i).attr("nk-i")),NKResize.dispatchEvent("onResize",{start:NKResize.start_rows,end:n,i:l,e:$(i)[0],parent:$(i).parent()[0]}),$(".NKDrag_rows").children("div").children().removeClass("NKResize_disable_temp")),NKResize.resizing_vertical_element=null,NKResize.resizing_horizontal_element=null,$(this).css("cursor",""))}$(".NKDrag_columns").off(),$(".NKDrag_rows").off(),$(".NKDrag_columns").children("div").off(),$(".NKDrag_rows").children("div").off(),$(".NKDrag_columns").each(function(e){var t=[];$(this).children("div").each(function(e){$(this).attr("nk-i",e),$(this).css("overflow","hidden");e=$(this).attr("nk-width"),e=NK.empty(e)?"auto":e;t.push(e)}),$(this).css("display","grid"),$(this).css("grid-template-columns",t.join(" ")),$(this).css("overflow","hidden")}),$(".NKDrag_rows").each(function(e){var t=[];$(this).children("div").each(function(e){$(this).attr("nk-i",e),$(this).css("overflow","hidden");e=$(this).attr("nk-height"),e=NK.empty(e)?"auto":e;t.push(e)}),$(this).css("display","grid"),$(this).css("grid-template-rows",t.join(" ")),$(this).css("overflow","hidden")}),NKResize.resizing_vertical_element=null,NKResize.resizing_horizontal_element=null,$(".NKDrag_columns").on("mouseleave",function(){NKResize.resizing_vertical_element=null,$(this).css("cursor","")}),$(".NKDrag_rows").on("mouseleave",function(){NKResize.resizing_horizontal_element=null,$(this).css("cursor","")}),$(".NKDrag_columns").children("div").on("mousemove",e).on("mousedown",e).on("mouseup",e),$(".NKDrag_rows").children("div").on("mousemove",e).on("mousedown",e).on("mouseup",e)}},NKRouting={routes:[],get_url:function(){return[window.location.protocol+"//",window.location.host,window.location.pathname.split("/").slice(0,-1).join("/")+"/",window.location.pathname.split("/").pop(),window.location.search]},set_routes:function(e){NKRouting.routes[e.router_name]=e,NK.isset(e.default_section)&&$(document).ready(function(){NKRouting.go(e.router_name,e.default_section)})},go:function(e,t){var o;NK.isset(NKRouting.routes[e])?(o=NKRouting.routes[e].sections[t],NK.isset(o)?NK.isset(o.get)?NKRouting._perform_get(e,t):NK.isset(o.show)&&NKRouting._perform_show(e,t):console.error("Routes for",e,"->",t,"not set.")):console.error("Routes for",e,"not set.")},_perform_show:function(e,t){var o=NKRouting.routes[e].container,s=NKRouting.routes[e].sections;if(NK.isset(o)){if(!NK.isset(s[t].content))for(var r in s)s[r].content=$(s[r].show).html(),$(s[r].show).html("");NKRouting._replace_content(e,t)}else{for(var r in s)$(s[r].show).hide();$(s[t].show).show()}NKRouting._run_controller(e,t)},_perform_get:function(t,o){var s=NKRouting.routes[t].sections[o];NK.isset(s.loading)||(NK.isset(s.content)?(NKRouting._replace_content(t,o),NKRouting._run_controller(t,o)):(s.loading=!0,$.ajax({url:s.get,success:function(e){s.content=e,NKRouting._replace_content(t,o),delete s.loading,NKRouting._run_controller(t,o)}})))},_replace_content:function(e,t){var o=NKRouting.routes[e].container,s=NKRouting.routes[e].sections[t].content;NKRouting.routes[e].sections[t].ctrl;$(o).html(s)},_run_controller:function(router_name,section){var router=NKRouting.routes[router_name],ruta=NKRouting.routes[router_name].sections[section],controller_init=ruta.ctrl+".init",controller_enter=ruta.ctrl+".enter",last_controller,first_time;NK.isset(router.last_section)&&(last_controller=NKRouting.routes[router_name].sections[router.last_section].ctrl,NK.isset(last_controller)&&"function"===eval("typeof "+last_controller+".leave")&&eval(last_controller+".leave()")),router.last_section=section,NK.isset(ruta.ctrl)&&(first_time=!NK.isset(ruta.loaded),ruta.loaded=!0,first_time&&"function"===eval("typeof "+controller_init)&&eval(controller_init+"()"),"function"===eval("typeof "+controller_enter)&&eval(controller_enter+"()"))}},NKStick={};if(void 0===NK)throw"You must include base.js before stick.js";NKStick.start=function(){NK.isset(NKStick.loaded)&&!0===NKStick.loaded||($.each($(".NKStickBD"),function(e,t){$(this).attr("nkdata-top",$(this).offset().top)}),window.addEventListener("load",NKStick.reload),window.addEventListener("resize",NKStick.reload),window.addEventListener("scroll",NKStick.reload),NKStick.loaded=!0)},NKStick.reload=function(){var e=$(document).height()>$(window).height(),s=$(document).scrollTop();e?$(".NKStickBN").removeClass("NKStickBO"):$(".NKStickBN").addClass("NKStickBO"),e&&($(".NKStickBD").removeClass("NKStickBO"),$.each($(".NKStickBD"),function(e,t){s+$(window).height()<$(this).offset().top+$(this).height()&&$(".NKStickBD").addClass("NKStickBO")}),$(".NKStickTD").removeClass("NKStickTO"),$.each($(".NKStickTD"),function(e,t){var o;"fixed"===$(this).css("position")?(o=parseInt($(this).css("top")),s<o?$(this).css("margin-top",-s):$(this).css("margin-top",-o)):s>$(this).offset().top&&$(".NKStickTD").addClass("NKStickTO")}))};var NKStorage={};if(void 0===NK)throw"You must include base.js before storage.js";NKStorage.p=null,NKStorage.np=null,NKStorage.save=function(e){!0===e?(localStorage.setItem("NKStorage",JSON.stringify(NKStorage.p)),sessionStorage.setItem("NKStorage",JSON.stringify(NKStorage.np)),NKStorage.saveOnLeave=!1):NKStorage.saveOnLeave=!0},NKStorage.start=function(){if(!NK.isset(NKStorage.loaded)||!0!==NKStorage.loaded){try{NKStorage.p=JSON.parse(localStorage.getItem("NKStorage"))}catch(e){}NK.isset(NKStorage.p)||(localStorage.setItem("NKStorage",JSON.stringify({})),NKStorage.p=JSON.parse("{}"));try{NKStorage.np=JSON.parse(sessionStorage.getItem("NKStorage"))}catch(e){}NK.isset(NKStorage.np)||(sessionStorage.setItem("NKStorage",JSON.stringify({})),NKStorage.np=JSON.parse("{}")),NKStorage.loaded=!0}},NKStorage.clear=function(){localStorage.setItem("NKStorage",JSON.stringify({})),NKStorage.p=JSON.parse("{}"),sessionStorage.setItem("NKStorage",JSON.stringify({})),NKStorage.np=JSON.parse("{}")},NKStorage.oldLeaveHandler=window.onbeforeunload,window.onbeforeunload=function(e){NKStorage.oldLeaveHandler&&NKStorage.oldLeaveHandler(e),!0===NKStorage.saveOnLeave&&NKStorage.save(!0)};