var NK={};function NKEventListener(){this.events={},this.addEventListener=function(t,e){NK.isset(this.events[t])||(this.events[t]=[]),this.events[t].push(e)},this.removeEventListener=function(t,e){for(var o=0;o<this.events[t].length;o++)if(this.events[t][o]===e){this.events[t].splice(o,1);break}},this.dispatchEvent=function(t,e){if(NK.isset(this.events[t]))for(var o=0;o<this.events[t].length;o++)(0,this.events[t][o])(e)}}if(NK.isset=function(t){if(void 0===t)return!1;if(null==t)return!1;if("function"==typeof t)try{t()}catch(t){return!1}return!0},NK.empty=function(t){return!NK.isset(t)||0===(t="function"==typeof t?t():t).length},NK.clone=function(t){return console.error("NK.clone() deprecated, use NKObject.clone() instead."),JSON.parse(JSON.stringify(t))},NK.backtrace=function(t=""){var e=(new Error).stack.split("\n").slice(2).join("\n");console.log("Backtrace: "+t+"\n"+e)},!NK.isset(()=>$))throw"Error, you must include jquery before using NKLibsJS";NK.core={},NK.core.reloadOnDomChange=function(t){NK.isset(NK.core.reactableModules)||(NK.core.reactableModules=[]),NK.core.reactableModules.push(t),NK.isset(NK.core.MutationObserver)||(MutationObserver=window.MutationObserver||window.WebKitMutationObserver,NK.core.MutationObserverOffset=1,NK.core.MutationObserver=new MutationObserver(function(t,e){if(0<NK.core.MutationObserverOffset)NK.core.MutationObserverOffset--;else for(var o=0;o<NK.core.reactableModules.length;o++)void 0!==NK.core.reactableModules[o].reload&&NK.core.reactableModules[o].reload()}),NK.core.MutationObserver.observe(document,{subtree:!0,childList:!0}))},NK.core.ignoreMutations=function(t){NK.isset(NK.core.MutationObserver)&&(NK.core.MutationObserverOffset+=t)},window.addEventListener("load",function(){window.loaded=!0});var NKActions={};if(void 0===NK)throw"You must include base.js before actions.js";NKActions.start=function(t){NK.isset(NKActions.loaded)&&!0===NKActions.loaded||(window.addEventListener("load",NKActions.reload),!0===window.loaded&&NKActions.reload(),!0===t&&NK.core.reloadOnDomChange(NKActions),NKActions.loaded=!0)},NKActions.reload=function(){function e(t,e){var o=$(t).html();0<(o=o.toLowerCase().startsWith("hide")||o.toLowerCase().startsWith("show")?o.substring(4):o).length&&!o.startsWith(" ")&&(o=" "+o),e.is(":visible")?$(t).html("Hide"+o):$(t).html("Show"+o),console.log("entra")}$(".NKHide_btn").off().on("click",function(){$(this).closest(".NKHide_dst").hide()}),$(".NKDel_btn").off().on("click",function(){$(this).closest(".NKDel_dst").remove()}),$(".NKToggle_btn").off().on("click",function(){var t=$(this).siblings(".NKToggle_dst");t.toggle(),$(this).hasClass("NKReact")&&e(this,t)}),$(".NKToggle_btn.NKReact").each(function(){e(this,$(this).siblings(".NKToggle_dst"))}),$(".NKTemplate_btn").off().on("click",function(){var t=$(this).attr("class").split("NKTemplate_btn ")[1].split(" ")[0];$(".NKTemplate_dst."+t).append($(".NKTemplate_src."+t).clone(!0,!0).removeClass("NKTemplate_src").addClass("NKTemplate").show())})};let NKArray={clone:function(t){return JSON.parse(JSON.stringify(t))}};NKArray.getCombinations=function(){if("string"!=typeof arguments[0])return console.error("First argument must be a string."),[];let r=arguments[0];var e=[];for(let t=1;t<arguments.length;t++){if(!Array.isArray(arguments[t]))return console.error("One of the parameters is not an array."),[];e.push(arguments[t])}function t(t,n){return t.reduce(function(t,e,o){return""+t+n[o][e]+r},"")}var o=new Array(e.length).fill(0),n=[];let i=t(o,e);for(n.push(i.slice(0,-1));function(e,o){for(let t=e.length-1;0<=t;t--){var n=o[t].length-1;if(e[t]+1<=n)return e[t]++,1;if(t-1<0)return;e[t]=0}}(o,e);)i=t(o,e),n.push(i.slice(0,-1));return n};var NKCast={};if(void 0===NK)throw"You must include base.js before cast.js";NKCast.intByteArray={toUtf8String:function(t){for(var e="",o=0;o<t.length;o++)(t[o]<0||255<t[o])&&console.error("Error NKCast.intByteArray.toUtf8String(): ("+t[o]+") Out of range [0..255]"),e+=String.fromCharCode(t[o]);return e},toUtf16String:function(t){return NKCast.intByteArray.toUtf8String(t)},toHexString:function(t,e,o){if(!NK.isset(t))return"";for(var n="",r=0;r<t.length;r++)o&&0!=r&&(n+=" "),n+=NKCast.intByte.toHexString(t[r],e);return n},toInt:function(t){for(var e=0,o=1,n=t.length-1;0<=n;n--)(t[n]<0||255<t[n])&&console.error("Error NKCast.intByteArray.toUtf16String(): ("+t[n]+") Out of range [0..255]"),e+=t[n]*o,o*=256;return e}},NKCast.intByte={toHexString:function(t,e){return(t<0||255<t)&&console.error("Error NKCast.intByte.toHexString(): ("+t+") Out of range [0..255]"),e?"0x"+t.toString(16):t.toString(16)}},NKCast.utf16String={toIntByteArray:function(t){for(var e="",o=0;o<t.length;o++)e+=t.charCodeAt(o);return e}},NKCast.utf8String={toIntByteArray:function(t){return NKCast.utf16String.toIntByteArray(t)}};var NKClipboard={set:function(t){var e=document.createElement("textarea"),t=(e.style.position="absolute",e.style.left="-10000px",e.readonly=!0,e.value=t,document.body.appendChild(e),0<document.getSelection().rangeCount&&document.getSelection().getRangeAt(0));e.select(),document.execCommand("copy"),document.body.removeChild(e),t&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(t))},get:function(){return navigator.clipboard.readText()}},NKContextMenu={};if(void 0===NK)throw"You must include base.js before context_menu.js";var event_listener=new NKEventListener,NKContextMenu={...event_listener,start:function(){if(!NK.isset(NKContextMenu.loaded)||!0!==NKContextMenu.loaded){if(NKContextMenu.loaded=!0,void 0===NKPosition)throw"You must include position.js";if(null===document.body)throw"The <body> tag must be fully loaded before calling NKContextMenu.start()";NKPosition.start(),$("#NKContextMenu").length<1&&((t=document.createElement("div")).setAttribute("id","NKContextMenu"),document.body.appendChild(t)),$("#NKContextMenu").hide();var t,o=null;document.addEventListener("contextmenu",function(t){var e=t.target;o=e,NKContextMenu.dispatchEvent("onOpen",{target:e}),0===$("#NKContextMenu").children().length?$("#NKContextMenu").hide():($("#NKContextMenu").show(),$("#NKContextMenu .NKSubmenu").hide(),$("#NKContextMenu").css("left",NKPosition.getMouseX()),$("#NKContextMenu").css("top",NKPosition.getMouseY()),t.preventDefault())}),document.addEventListener("mouseup",function(t){2!==t.button&&$("#NKContextMenu").is(":visible")&&(t=t.target,$(t).hasClass("NKItem")?NKContextMenu.dispatchEvent("onClose",{id:t.getAttribute("data-id"),text:$(t).children(".NKTitle").text(),target:o,button:t}):NKContextMenu.dispatchEvent("onClose",{id:null,target:o,button:null}),$("#NKContextMenu").hide())}),NKContextMenu.refresh()}}};NKContextMenu.setContent=function(t){var e=[];function s(t,e,o,n){var r=$(document.createElement("div")),i=$(document.createElement("div")),s=$(document.createElement("div"));return r.addClass("NKItem"),i.addClass("NKIcon"),s.addClass("NKTitle"),r.attr("data-id",t),s.text(e),NK.empty(o)||(i.append(o),i.css("margin-right","5px")),r.append(i),r.append(s),null!==n&&((t=$(document.createElement("div"))).addClass("NKSubmenu"),t.append(n),r.addClass("NKArrow"),r.append(t)),r}NK.empty(t)||(e=function t(e){for(var o=[],n=0;n<e.length;n++){var r,i=e[n];"item"===i.type?o.push(s(i.id,i.text,i.icon,null)):"menu"===i.type?(r=t(i.items),o.push(s(i.id,i.text,i.icon,r))):"divider"===i.type&&((r=$(document.createElement("div"))).addClass("NKDivider"),o.push(r))}return o}(t));t=$("#NKContextMenu");t.empty(),t.append(e),NKContextMenu.refresh()},NKContextMenu.refresh=function(){$(".NKItem").off(),$(".NKSubmenu").hide(),$(".NKItem").on("mouseenter",function(){var t=$(this),e=($(this).parent().find(".NKSubmenu").hide(),$(this).children(".NKSubmenu"));1===e.length&&(e.show(),e.css("left",t.width()+30))})};let NKDate={set:function(t,e=null,o=null,n=null,r=null,i=null,s=null,a=null){return t.setTime(new Date(n,o-1,e,r,i,s,a).getTime()),t},clone:function(t){return new Date(t.getTime())},setFromString:function(e,t,o){var n=t.split(/(?:\/| |:|\\)+/),r=o.split(/(?:\/| |:|\\)+/);if(n.length!==r.length)throw"Date ("+t+") does not fit the pattern ("+o+")";e.setHours(0,0,0,0);for(let t=0;t<r.length;t++)switch(r[t]){case"DD":NKDate.setDay(e,n[t]);break;case"MM":NKDate.setMonth(e,n[t]);break;case"YYYY":case"YY":NKDate.setYear(e,n[t]);break;case"hh":NKDate.setHour(e,n[t]);break;case"mm":NKDate.setMinute(e,n[t]);break;case"sss":NKDate.setMilisecond(e,n[t]);break;case"ss":NKDate.setSecond(e,n[t])}return e},getString:function(t,e="DD/MM/YYYY"){let o=e;return o=(o=(o=(o=(o=(o=(o=(o=o.replaceAll("DD",NKDate.getDay(t,!0))).replaceAll("MM",NKDate.getMonth(t,!0))).replaceAll("YYYY",NKDate.getYear(t,!0))).replaceAll("YY",NKDate.getYear(t,!1))).replaceAll("hh",NKDate.getHour(t,!0))).replaceAll("mm",NKDate.getMinute(t,!0))).replaceAll("sss",NKDate.getMillisecond(t,!0))).replaceAll("ss",NKDate.getSecond(t,!0))},getDay:function(t,e=!0){let o=t.getDate();return o=e?o.toString().padStart(2,"0"):o},setDay:function(t,e){if(null!==e)return t.setDate(e),t},getMonth:function(t,e=!0){let o=t.getMonth()+1;return o=e?o.toString().padStart(2,"0"):o},setMonth:function(t,e){if(null!==e)return t.setMonth(parseInt(e)-1),t},getYear:function(t,e=!0){if(e)return t.getFullYear();let o=t.getYear();return 100<o&&(o-=100),o},setYear:function(t,e){if(null!==e)return t.setYear(e),t},getHour:function(t,e=!0){let o=t.getHours();return o=e?o.toString().padStart(2,"0"):o},setHour:function(t,e){if(null!==e)return t.setHours(e),t},getMinute:function(t,e=!0){let o=t.getMinutes();return o=e?o.toString().padStart(2,"0"):o},setMinute:function(t,e){if(null!==e)return t.setMinutes(e),t},getSecond:function(t,e=!0){let o=t.getSeconds();return o=e?o.toString().padStart(2,"0"):o},setSecond:function(t,e){if(null!==e)return t.setSeconds(e),t},getMillisecond:function(t,e=!0){let o=t.getMilliseconds();return o=e?o.toString().padStart(3,"0"):o},setMilisecond:function(t,e){if(null!==e)return t.setMilliseconds(e),t},getUnixTimestamp:function(t){return t.getTime()},addMonths:function(t,e){return t.setMonth(t.getMonth()+e),t},addHours:function(t,e){return NKDate.addMiliseconds(t,60*e*6e4)},addMinutes:function(t,e){return NKDate.addMiliseconds(t,60*e*1e3)},addSeconds:function(t,e){return NKDate.addMiliseconds(t,1e3*e)},addMiliseconds:function(t,e){return t.setTime(t.getTime()+e),t},print:function(t){console.log(t.toLocaleString())},daysInMonth:function(t,e){if(0===e)throw"Month 0 does not exist, January is month 1.";return 32-new Date(t,e-1,32).getDate()},firstDayOfMonth:function(t,e,o=!1){if(0===e)throw"Month 0 does not exist, January is month 1.";t=new Date(t,e-1).getDay();return o?t:0===t?6:t-1},getDatesBetween:function(t,e=null){null===e&&(e=t);for(var o=[],n=new Date(t);n<=e;)o.push(new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0)),n.setDate(n.getDate()+1);return o},getCalendar:function(e,o,t=!0,n=!1){var r=[],i=new Date,s=e===i.getFullYear()&&o===i.getMonth();if(t){var a=NKDate.firstDayOfMonth(e,o,n);for(let t=0;t<a;t++)r.push({day:"",today:!1,date:null})}var l=NKDate.daysInMonth(e,o);for(let t=0;t<l;t++)r.push({day:t+1,today:s&&t+1===i.getDate(),date:new Date(e,o-1,t+1)});return r}};var NKDrag={},event_listener=new NKEventListener,NKDrag={...event_listener,selection:{element:null},start:function(t){if(!NK.isset(NKDrag.loaded)||!0!==NKDrag.loaded){if(NKDrag.loaded=!0,void 0===NKPosition)throw"You must include position.js";NKPosition.start(),window.addEventListener("load",NKDrag.reload),!0===window.loaded&&NKDrag.reload(),!0===t&&NK.core.reloadOnDomChange(NKDrag),$(document).on("mousemove",function(){var t,e;null!=NKDrag.selection.element&&(t=NKPosition.getMouseX()-NKDrag.selection.offset[0],e=NKPosition.getMouseY()-NKDrag.selection.offset[1],NKDrag.selection.element.offset({left:t,top:e}),NKDrag.dispatchEvent("onDrag",{e:NKDrag.selection.element[0],offset:{left:t,top:e},position:NKDrag.selection.element.position()}))})}},reload:function(){$(".NKDrag_src").on("mousedown",function(){NKDrag.selection.element=$(this).closest(".NKDrag_dst"),NKDrag.selection.offset=NKPosition.getMouse();var t=NKDrag.selection.element.offset();NKDrag.selection.offset[0]-=t.left,NKDrag.selection.offset[1]-=t.top}),$(".NKDrag_src").on("mouseup",function(){NKDrag.selection.element=null})}},NKForm={};if(void 0===NK)throw"You must include base.js before form.js";NKForm.errors={duplicated_fields:!0,invalid_json:!0},NKForm.getFields=function(t,e){var o={};return $(t+" :input").each(function(){if(!NK.empty(this.name))if("[]"===this.name.slice(-2)){var t=this.name.substr(0,this.name.length-2);NK.isset(o[t])||(o[t]=[]),o[t].push($(this).val())}else{if(NKForm.errors.duplicated_fields&&NK.isset(o[this.name]))throw"NKForm.getFields: Duplicated input field with name ("+this.name+")";t=$(this).attr("type");o[this.name]="checkbox"===t?$(this).prop("checked"):$(this).val()}}),!0===e?JSON.stringify(o):o},NKForm.setFields=function(t,e,o){if(!NK.empty(e)){if(!0===o)try{e=JSON.parse(e)}catch(t){if(NKForm.errors.invalid_json)throw"NKForm.setFields: Invalid input json. ("+e+")";return}$(t+" :input").each(function(){NK.empty(e[this.name])||("checkbox"===$(this).attr("type")?$(this).prop("checked",/^(true|1)$/i.test(e[this.name])):$(this).val(e[this.name]))})}},NKForm.clearFields=function(t){$(t+" :input").each(function(){"checkbox"===$(this).attr("type")?$(this).prop("checked",!1):$(this).val("")})},NKForm.send=function(t,e,o){$.post(e,NKForm.getFields(t),function(t,e){NK.isset(o)?o(t,e):location.reload()})},NKForm.fileChooser=function(o,t,e=!1,n=!0){t=t||"",e=e?"multiple":"",$("body").append('<input type="file" id="NKtmpfile" accept="'+t+'" '+e+">");t=document.getElementById("NKtmpfile");t.addEventListener("change",async function(t){var e=await NKForm._cleanFileList(this.files,n);o(e)},!1),$("#NKtmpfile").trigger("click"),t.parentNode.removeChild(t)},NKForm.dirChooser=function(t,e){window.showDirectoryPicker({startIn:t}).then(t=>{e(t)})},NKForm.postFile=function(t,e,o,n){var r,i=new FormData;for(r in i.append("file[]",e),o)i.append(r,o[r]);$.ajax({type:"POST",url:t,contentType:!1,processData:!1,data:i,success:function(t){n(t)}})},NKForm.fileDropzone=function(t,e,o=!0){t.addEventListener("drop",async function(t){t.preventDefault();t=t.dataTransfer.files,0===t.length&&console.error("Unable to handle dragged files."),t=await NKForm._cleanFileList(t,o);e(t)}),t.addEventListener("dragover",function(t){t.preventDefault()})},NKForm._cleanFileList=async function(t,e=!0){for(var o=[],n=0;n<t.length;n++){var r=t[n],i={file_obj:r,name:r.name,size:r.size,type:r.type,lastModifiedDate:r.lastModifiedDate,lastModified:r.lastModified};e&&(i.base64=await NKForm.getFileBase64(r)),o.push(i)}return o},NKForm.getFileBase64=function(n){return new Promise(function(e,o){var t=new FileReader;t.onload=function(t){e(this.result)},t.onerror=function(t){o()},t.readAsDataURL(n)})};var NKLoader={};if(void 0===NK)throw"You must include base.js before loader.js";NKLoader.setSelector=function(t,n){$(t).css("display","none"),$(n).css("display","none"),window.setInterval(function(){0<$.active?$(t).css("display","block"):($.active=0,$(t).css("display","none"))},500),$(document).ajaxError(function(){$.active=0}),"localhost"!=document.domain&&(window.onerror=function(t,e,o){return $.active=0,NK.isset(n)&&$(n).css("display","block"),console.log("Error: ",t,e,o),!0})};var NKModal={config:{add_close_icon:!0,close_on_click_outside:!0},reload:function(){$(".NKModal .NKCloseIcon").off().on("click",function(){$(this).parents(".NKModal").hide()}),NKModal.config.close_on_click_outside&&$(".NKModal").off().on("click",function(t){t.target===this&&$(this).hide()})},show:function(t){var e,o,n="#"+t;0===$(n).length?console.error("Element "+n+" not found."):(0===(e=$(".NKModal "+n)).length&&(o='<div class="NKModal '+t+'">            <div class="NKContent">                '+(NKModal.config.add_close_icon?'<i class="NKCloseIcon"></i>':"")+"            </div>        </div>",$(n).after(o),$(n).appendTo(".NKModal."+t+" .NKContent"),$(n).show(),NKModal.reload()),$(n).parents(".NKModal").show(),e.show())},hide:function(t){t="#"+t;0!==$(".NKModal "+t).length&&$(t).parents(".NKModal").hide()},toggle:function(t){0!==$(".NKModal #"+t).length&&$("#"+t).parents(".NKModal").is(":visible")?NKModal.hide(t):NKModal.show(t)}},NKNotification={timeout:null};if(void 0===NK)throw"You must include base.js before loader.js";NKNotification.start=function(){var t,e;$("#NKNotification").length<1&&(t=document.createElement("div"),e=document.createElement("div"),t.setAttribute("id","NKNotification"),t.style.display="none",t.innerHTML='<svg onclick="NKNotification.hide()" class="close-icon" xmlns="http://www.w3.org/2000/svg" stroke="black" width="20" height="20" viewBox="0 0 24 24" stroke-width="3" stroke-linecap="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',e.setAttribute("class","content_wrapper"),t.append(e),document.body.appendChild(t))},NKNotification.show=function(t=["Title","Subtitle"],e=0){clearTimeout(NKNotification.timeout),document.getElementById("NKNotification").style.display="block",$("#NKNotification .content_wrapper").html("");for(var o,n=0;n<t.length;n++)"string"==typeof t[n]?((o=document.createElement("div")).setAttribute("class","content"),0===n&&o.setAttribute("class","content bold"),o.innerHTML=t[n],$("#NKNotification .content_wrapper").append(o)):$("#NKNotification .content_wrapper").append(t[n]);0<e&&(NKNotification.timeout=setTimeout(NKNotification.hide,e))},NKNotification.hide=function(){clearTimeout(NKNotification.timeout),document.getElementById("NKNotification").style.display="none"};let NKObject={clone:function(t){return JSON.parse(JSON.stringify(t))},setValue:function(start_obj,str_obj_path,value){let path_parts=str_obj_path.split("."),aux_path="start_obj";for(let i=0;i<path_parts.length;i++)aux_path+="."+path_parts[i],"undefined"===eval("typeof "+aux_path)&&eval(aux_path+" = {}");eval(aux_path+" = "+JSON.stringify(value))},getValue:function(t,e=void 0){if(void 0===t)return e;if(null==t)return e;if("function"==typeof t)try{return t()}catch(t){return e}return t}};var NKPopup={};if(void 0===NK)throw"You must include base.js before popup.js";NKPopup.config={allow_hover:!0,mouse_margin:5,box_margin:5},NKPopup.start=function(t){if(!NK.isset(NKPopup.loaded)||!0!==NKPopup.loaded){if(NKPopup.loaded=!0,void 0===NKPosition)throw"You must include position.js";NKPosition.start(),window.addEventListener("load",NKPopup.reload),!0===window.loaded&&NKPopup.reload(),!0===t&&NK.core.reloadOnDomChange(NKPopup)}},NKPopup.reload=function(){$(".NKPopup_dst").hide(),$(".NKPopup_src").off(),$(".NKPopup_src").on("mousemove",function(){var t=$(this).siblings(".NKPopup_dst"),e=NK.isset(t.attr("nk-type"))?t.attr("nk-type"):"box",o=NK.isset(t.attr("nk-align"))?t.attr("nk-align").split(","):["top","center"],n=NK.isset(t.attr("nk-offset"))?t.attr("nk-offset").split(",").map(Number):[0,0],r=NK.isset(t.attr("nk-arrow-size"))?t.attr("nk-arrow-size").split(",").map(Number)[1]:0,i=t.attr("nk-x"),s=t.attr("nk-y"),a=(t.show(),{});if("mouse"===e)var l=[10,22],c=NKPosition.getMouse(),u=NKPopup.config.mouse_margin;else{if("box"!==e)throw"Invalid type: "+e;l=[$(this).outerWidth(),$(this).outerHeight()],c=[$(this).offset().left,$(this).offset().top],u=NKPopup.config.box_margin}if("top"===o[0]||"bottom"===o[0]){if(NK.isset(o[1])&&"center"!==o[1])if("left"===o[1])a={left:c[0]-t.outerWidth()+l[0],top:c[1]-t.outerHeight()-r-u};else{if("right"!==o[1])throw"Invalid param '"+o[1]+"'";a={left:c[0],top:c[1]-t.outerHeight()-r-u}}else a={left:c[0]-t.outerWidth()/2+l[0]/2,top:c[1]-t.outerHeight()-r-u};"bottom"===o[0]&&(a.top+=l[1]+t.outerHeight()+2*r+2*u)}else{if("left"!==o[0]&&"right"!==o[0])throw"Invalid param '"+o[0]+"'";if(NK.isset(o[1])&&"middle"!==o[1])if("top"===o[1])a={left:c[0]-t.outerWidth()-u-r,top:c[1]-t.outerHeight()+l[1]};else{if("bottom"!==o[1])throw"Invalid param '"+o[1]+"'";a={left:c[0]-t.outerWidth()-u-r,top:c[1]}}else a={left:c[0]-t.outerWidth()-u-r,top:c[1]-t.outerHeight()/2+l[1]/2};"right"===o[0]&&(a.left+=l[0]+t.outerWidth()+2*r+2*u)}a.left=a.left+n[0],a.top=a.top+n[1],NK.isset(i)&&(a.left=i),NK.isset(s)&&(a.top=s),t.offset(a)}),$(".NKPopup_src").on("mouseleave",function(){var t=$(this);NKPopup.config.allow_hover?window.setTimeout(function(){0==t.siblings(".NKPopup_dst:hover").length?t.siblings(".NKPopup_dst").hide():t.siblings(".NKPopup_dst:hover").on("mouseleave",function(){$(this).off().hide()})},50):t.siblings(".NKPopup_dst").hide()}),NK.core.ignoreMutations(1),$(".NKPopup_dst").each(function(t){var e,o,n,r,i,s,a;(NK.isset($(this).attr("nk-arrow-size"))||NK.isset($(this).attr("nk-arrow-offset")))&&(e=NK.isset($(this).attr("nk-arrow-size"))?$(this).attr("nk-arrow-size").split(",").map(Number):[10,7],o=NK.isset($(this).attr("nk-offset"))?$(this).attr("nk-offset").split(",").map(Number):[0,0],n=NK.isset($(this).attr("nk-align"))?$(this).attr("nk-align").split(","):["top","center"],r=$(this).siblings(".NKPopup_src"),(i=$(document.createElement("i"))).addClass("NKPopup_arrow_stroke"),$(this).append(i),(s=$(document.createElement("i"))).addClass("NKPopup_arrow_fill"),$(this).append(s),a={border:1,stroke_border:[0,0,0,0],fill_border:[0,0,0,0],stroke_colors:["","","",""],fill_colors:["","","",""],left:[50,50],top:[0,0]},"top"===n[0]?(a.border=parseInt($(this).css("border-bottom-width").split("px")[0]),a.stroke_border=[e[1]+a.border,e[0]/2+a.border,0,e[0]/2+a.border],a.fill_border=[e[1],e[0]/2,0,e[0]/2],a.top=[$(this).innerHeight(),$(this).innerHeight()],a.stroke_colors[0]=$(this).css("border-bottom-color"),a.fill_colors[0]=$(this).css("background-color")):"bottom"===n[0]?(a.border=parseInt($(this).css("border-top-width").split("px")[0]),a.stroke_border=[0,e[0]/2+a.border,e[1]+a.border,e[0]/2+a.border],a.fill_border=[0,e[0]/2,e[1],e[0]/2],a.top=[-1*e[1]-1,-1*e[1]],a.stroke_colors[2]=$(this).css("border-top-color"),a.fill_colors[2]=$(this).css("background-color")):"right"===n[0]?(a.border=parseInt($(this).css("border-left-width").split("px")[0]),a.stroke_border=[e[0]/2+a.border,e[1]+a.border,e[0]/2+a.border,0],a.fill_border=[e[0]/2,e[1],e[0]/2,0],a.stroke_colors[1]=$(this).css("border-left-color"),a.fill_colors[1]=$(this).css("background-color"),a.left[0]=0-e[1]-a.border,a.left[1]=a.left[0]+a.border):"left"===n[0]&&(a.border=parseInt($(this).css("border-right-width").split("px")[0]),a.stroke_border=[e[0]/2+a.border,0,e[0]/2+a.border,e[1]+a.border],a.fill_border=[e[0]/2,0,e[0]/2,e[1]],a.stroke_colors[3]=$(this).css("border-right-color"),a.fill_colors[3]=$(this).css("background-color"),a.left[0]=$(this).innerWidth(),a.left[1]=a.left[0]),"left"===n[1]?(a.left[0]=$(this).outerWidth()-r.outerWidth()/2-e[0]/2-2*a.border,a.left[1]=a.left[0]+a.border):"center"===n[1]?(a.left[0]=$(this).outerWidth()/2-e[0]/2-2*a.border,a.left[1]=a.left[0]+a.border):"right"===n[1]?(a.left[0]=r.outerWidth()/2-e[0]/2-2*a.border,a.left[1]=a.left[0]+a.border):"top"===n[1]?(a.top[0]=$(this).outerHeight()-r.outerHeight()/2-e[0]/2-a.border,a.top[1]=a.top[0]+a.border):"middle"===n[1]?(a.top[0]=$(this).outerHeight()/2-e[0]/2-a.border,a.top[1]=a.top[0]+a.border):"bottom"===n[1]&&(a.top[0]=r.outerHeight()/2-e[0]/2-a.border,a.top[1]=a.top[0]+a.border),a.left[0]-=o[0],a.left[1]-=o[0],a.top[0]-=o[1],a.top[1]-=o[1],i.css("top",a.top[0]).css("left",a.left[0]).css("border-top-width",a.stroke_border[0]).css("border-right-width",a.stroke_border[1]).css("border-bottom-width",a.stroke_border[2]).css("border-left-width",a.stroke_border[3]).css("border-top-color",a.stroke_colors[0]).css("border-right-color",a.stroke_colors[1]).css("border-bottom-color",a.stroke_colors[2]).css("border-left-color",a.stroke_colors[3]),s.css("top",a.top[1]).css("left",a.left[1]).css("border-top-width",a.fill_border[0]).css("border-right-width",a.fill_border[1]).css("border-bottom-width",a.fill_border[2]).css("border-left-width",a.fill_border[3]).css("border-top-color",a.fill_colors[0]).css("border-right-color",a.fill_colors[1]).css("border-bottom-color",a.fill_colors[2]).css("border-left-color",a.fill_colors[3]))})};var NKPosition={};if(void 0===NK)throw"You must include base.js before position.js";NKPosition.start=function(){NK.isset(NKPosition.loaded)&&!0===NKPosition.loaded||(NKPosition.loaded=!0,NKPosition.mouse=[0,0],window.addEventListener("mousemove",function(t){NKPosition.mouse=[t.clientX,t.clientY]},!0))},NKPosition.getMouse=function(t){return!0===(t=t||!1)?NKPosition.mouse:[NKPosition.mouse[0]+window.scrollX,NKPosition.mouse[1]+window.scrollY]},NKPosition.getMouseX=function(t){return!0===(t=t||!1)?NKPosition.mouse[0]:NKPosition.mouse[0]+window.scrollX},NKPosition.getMouseY=function(t){return!0===(t=t||!1)?NKPosition.mouse[1]:NKPosition.mouse[1]+window.scrollY},NKPosition.getScroll=function(){return[window.scrollX,window.scrollY]},NKPosition.getScrollX=function(){return window.scrollX},NKPosition.getScrollY=function(){return window.scrollY};class NKPromise{constructor(){let o=null,n=null;var t=new Promise((t,e)=>{o=t,n=e});return t.resolve=o,t.reject=n,t}}var NKResize={};if(void 0===NK)throw"You must include base.js before context_menu.js";var event_listener=new NKEventListener,NKResize={...event_listener,config:{column_resize_cursor:"col-resize",row_resize_cursor:"row-resize"},start:function(t){if(!NK.isset(NKResize.loaded)||!0!==NKResize.loaded){if(NKResize.loaded=!0,void 0===NKPosition)throw"You must include position.js";NKPosition.start(),window.addEventListener("load",NKResize.reload),!0===window.loaded&&NKResize.reload(),!0===t&&NK.core.reloadOnDomChange(NKResize)}},reload:function(){function f(t,e,o,n){var r=[],i=[],s=parseFloat(e.attr("nk-i"));if(s===(r=(n?t.css("grid-template-columns"):t.css("grid-template-rows")).split(" ")).length-1)return r.join(" ");for(var a=0;a<r.length;a++)i.push(a===s?o+"px":a===s+1?"auto":r[a]);return i}function t(t){var e,o,n,r,i,s,a=[$(this).offset().left,$(this).offset().top],l=NKPosition.getMouse(),a=[l[0]-a[0],l[1]-a[1]],c=[$(this).width(),$(this).height()],u=c[0]-5<=a[0],a=c[1]-5<=a[1],d=$(this).is(":last-child"),t=t.type;"mousedown"===t?(u&&!d&&(NKResize.resizing_vertical_element=this,NKResize.start_columns=$(this).parent().css("grid-template-columns").split(" "),NKResize.start_pos=l,NKResize.start_size=c,$(".NKDrag_columns").children("div").children().addClass("NKResize_disable_temp")),a&&!d&&(NKResize.resizing_horizontal_element=this,NKResize.start_rows=$(this).parent().css("grid-template-rows").split(" "),NKResize.start_pos=l,NKResize.start_size=c,$(".NKDrag_rows").children("div").children().addClass("NKResize_disable_temp"))):"mousemove"===t?(n=NKResize.resizing_vertical_element,r=NKResize.resizing_horizontal_element,null!==n?(e=$(n).parent(),c=parseInt($(n).css("border-right-width").slice(0,-2)),c=NKResize.start_size[0]+(l[0]-NKResize.start_pos[0])+c,o=f(e,$(n),c,!0),e.css("grid-template-columns",o.join(" ")),e.children("div").each(function(t){$(this).attr("nk-width",o[t])}),$(this).css("cursor",NKResize.config.column_resize_cursor)):null!==r?(e=$(r).parent(),c=parseInt($(r).css("border-bottom-width").slice(0,-2)),l=NKResize.start_size[1]+(l[1]-NKResize.start_pos[1])+c,o=f(e,$(r),l,!1),e.css("grid-template-rows",o.join(" ")),e.children("div").each(function(t){$(this).attr("nk-height",o[t])}),$(this).css("cursor",NKResize.config.row_resize_cursor)):u&&!d&&$(this).parent().hasClass("NKDrag_columns")?$(this).css("cursor",NKResize.config.column_resize_cursor):a&&!d&&$(this).parent().hasClass("NKDrag_rows")?$(this).css("cursor",NKResize.config.row_resize_cursor):$(this).css("cursor","")):"mouseup"===t&&(n=NKResize.resizing_vertical_element,r=NKResize.resizing_horizontal_element,null!==n&&(i=$(n).parent().css("grid-template-columns").split(" "),s=parseFloat($(n).attr("nk-i")),NKResize.dispatchEvent("onResize",{start:NKResize.start_columns,end:i,i:s,e:$(n)[0],parent:$(n).parent()[0]}),$(".NKDrag_columns").children("div").children().removeClass("NKResize_disable_temp")),null!==r&&(i=$(r).parent().css("grid-template-rows").split(" "),s=parseFloat($(r).attr("nk-i")),NKResize.dispatchEvent("onResize",{start:NKResize.start_rows,end:i,i:s,e:$(r)[0],parent:$(r).parent()[0]}),$(".NKDrag_rows").children("div").children().removeClass("NKResize_disable_temp")),NKResize.resizing_vertical_element=null,NKResize.resizing_horizontal_element=null,$(this).css("cursor",""))}$(".NKDrag_columns").off(),$(".NKDrag_rows").off(),$(".NKDrag_columns").children("div").off(),$(".NKDrag_rows").children("div").off(),$(".NKDrag_columns").each(function(t){var e=[];$(this).children("div").each(function(t){$(this).attr("nk-i",t),$(this).css("overflow","hidden");t=$(this).attr("nk-width"),t=NK.empty(t)?"auto":t;e.push(t)}),$(this).css("display","grid"),$(this).css("grid-template-columns",e.join(" ")),$(this).css("overflow","hidden")}),$(".NKDrag_rows").each(function(t){var e=[];$(this).children("div").each(function(t){$(this).attr("nk-i",t),$(this).css("overflow","hidden");t=$(this).attr("nk-height"),t=NK.empty(t)?"auto":t;e.push(t)}),$(this).css("display","grid"),$(this).css("grid-template-rows",e.join(" ")),$(this).css("overflow","hidden")}),NKResize.resizing_vertical_element=null,NKResize.resizing_horizontal_element=null,$(".NKDrag_columns").on("mouseleave",function(){NKResize.resizing_vertical_element=null,$(this).css("cursor","")}),$(".NKDrag_rows").on("mouseleave",function(){NKResize.resizing_horizontal_element=null,$(this).css("cursor","")}),$(".NKDrag_columns").children("div").on("mousemove",t).on("mousedown",t).on("mouseup",t),$(".NKDrag_rows").children("div").on("mousemove",t).on("mousedown",t).on("mouseup",t)}},NKRouting={routes:[],get_url:function(){return[window.location.protocol+"//",window.location.host,window.location.pathname.split("/").slice(0,-1).join("/")+"/",window.location.pathname.split("/").pop(),window.location.search]},set_routes:function(t){NKRouting.routes[t.router_name]=t,NK.isset(t.default_section)&&$(document).ready(function(){NKRouting.go(t.router_name,t.default_section)})},go:function(t,e){var o;NK.isset(NKRouting.routes[t])?(o=NKRouting.routes[t].sections[e],NK.isset(o)?NK.isset(o.get)?NKRouting._perform_get(t,e):NK.isset(o.show)&&NKRouting._perform_show(t,e):console.error("Routes for",t,"->",e,"not set.")):console.error("Routes for",t,"not set.")},_perform_show:function(t,e){var o=NKRouting.routes[t].container,n=NKRouting.routes[t].sections;if(NK.isset(o)){if(!NK.isset(n[e].content))for(var r in n)n[r].content=$(n[r].show).html(),$(n[r].show).html("");NKRouting._replace_content(t,e)}else{for(var r in n)$(n[r].show).hide();$(n[e].show).show()}NKRouting._run_controller(t,e)},_perform_get:function(e,o){var n=NKRouting.routes[e].sections[o];NK.isset(n.loading)||(NK.isset(n.content)?(NKRouting._replace_content(e,o),NKRouting._run_controller(e,o)):(n.loading=!0,$.ajax({url:n.get,success:function(t){n.content=t,NKRouting._replace_content(e,o),delete n.loading,NKRouting._run_controller(e,o)}})))},_replace_content:function(t,e){var o=NKRouting.routes[t].container,n=NKRouting.routes[t].sections[e].content;NKRouting.routes[t].sections[e].ctrl;$(o).html(n)},_run_controller:function(router_name,section){var router=NKRouting.routes[router_name],ruta=NKRouting.routes[router_name].sections[section],controller_init=ruta.ctrl+".init",controller_enter=ruta.ctrl+".enter",last_controller,first_time;NK.isset(router.last_section)&&(last_controller=NKRouting.routes[router_name].sections[router.last_section].ctrl,NK.isset(last_controller)&&"function"===eval("typeof "+last_controller+".leave")&&eval(last_controller+".leave()")),router.last_section=section,NK.isset(ruta.ctrl)&&(first_time=!NK.isset(ruta.loaded),ruta.loaded=!0,first_time&&"function"===eval("typeof "+controller_init)&&eval(controller_init+"()"),"function"===eval("typeof "+controller_enter)&&eval(controller_enter+"()"))}},NKStick={};if(void 0===NK)throw"You must include base.js before stick.js";NKStick.start=function(){NK.isset(NKStick.loaded)&&!0===NKStick.loaded||($.each($(".NKStickBD"),function(t,e){$(this).attr("nkdata-top",$(this).offset().top)}),window.addEventListener("load",NKStick.reload),window.addEventListener("resize",NKStick.reload),window.addEventListener("scroll",NKStick.reload),NKStick.loaded=!0)},NKStick.reload=function(){var t=$(document).height()>$(window).height(),n=$(document).scrollTop();t?$(".NKStickBN").removeClass("NKStickBO"):$(".NKStickBN").addClass("NKStickBO"),t&&($(".NKStickBD").removeClass("NKStickBO"),$.each($(".NKStickBD"),function(t,e){n+$(window).height()<$(this).offset().top+$(this).height()&&$(".NKStickBD").addClass("NKStickBO")}),$(".NKStickTD").removeClass("NKStickTO"),$.each($(".NKStickTD"),function(t,e){var o;"fixed"===$(this).css("position")?(o=parseInt($(this).css("top")),n<o?$(this).css("margin-top",-n):$(this).css("margin-top",-o)):n>$(this).offset().top&&$(".NKStickTD").addClass("NKStickTO")}))};var NKStorage={};if(void 0===NK)throw"You must include base.js before storage.js";var event_listener=new NKEventListener,NKStorage={...event_listener,p:null,np:null,save:function(t){!0===t?(localStorage.setItem("NKStorage",JSON.stringify(NKStorage.p)),sessionStorage.setItem("NKStorage",JSON.stringify(NKStorage.np)),NKStorage.saveOnLeave=!1):NKStorage.saveOnLeave=!0},start:function(t=!0){if(NKStorage.saveOnLeave=t,!NK.isset(NKStorage.loaded)||!0!==NKStorage.loaded){try{NKStorage.p=JSON.parse(localStorage.getItem("NKStorage"))}catch(t){}NK.isset(NKStorage.p)||(localStorage.setItem("NKStorage",JSON.stringify({})),NKStorage.p=JSON.parse("{}"));try{NKStorage.np=JSON.parse(sessionStorage.getItem("NKStorage"))}catch(t){}NK.isset(NKStorage.np)||(sessionStorage.setItem("NKStorage",JSON.stringify({})),NKStorage.np=JSON.parse("{}")),NKStorage.loaded=!0}},clear:function(){localStorage.setItem("NKStorage",JSON.stringify({})),NKStorage.p=JSON.parse("{}"),sessionStorage.setItem("NKStorage",JSON.stringify({})),NKStorage.np=JSON.parse("{}")},broadcast:function(t){var e,o=t.split("."),n=[];for(e in o)n.push(o[e]),NKStorage.dispatchEvent(n.join("."))},listen:function(t,e){NKStorage.addEventListener(t,e)}};NKStorage.oldLeaveHandler=window.onbeforeunload,window.onbeforeunload=function(t){NKStorage.oldLeaveHandler&&NKStorage.oldLeaveHandler(t),!0===NKStorage.saveOnLeave&&NKStorage.save(!0)};let NKVar={isset:function(t){if(void 0===t)return!1;if(null==t)return!1;if("function"==typeof t)try{t()}catch(t){return!1}return!0},empty:function(t){return!NK.isset(t)||0===(t="function"==typeof t?t():t).length}};String.prototype.escape=function(){var e={"&":"&amp;","<":"&lt;",">":"&gt;"};return this.replace(/[&<>]/g,function(t){return e[t]||t})};